  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (47.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbochatter_development"[0m
  [1m[35m (32.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbochatter_test"[0m
  [1m[35m (146.4ms)[0m  [1m[35mCREATE DATABASE "turbochatter_development" ENCODING = 'unicode'[0m
  [1m[35m (88.8ms)[0m  [1m[35mCREATE DATABASE "turbochatter_test" ENCODING = 'unicode'[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5435913384888513870)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20221129184433)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221129184433"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRooms (20221129184940)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying, "is_private" boolean DEFAULT FALSE, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221129184940"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateMessages (20221130062651)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "body" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_a8db0fb63a"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_messages_on_room_id" ON "messages" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130062651"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipants (20221130072543)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "participants" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b9a3c50f15"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_08123987c8"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_participants_on_user_id" ON "participants" ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_participants_on_room_id" ON "participants" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130072543"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20221130080807)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130080807"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddStatusToUsers (20221130142248)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "status" integer DEFAULT 0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130142248"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateJoinables (20221203121625)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "joinables" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_6e417600dd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_e8c38b2805"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_user_id" ON "joinables" ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_room_id" ON "joinables" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121625"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUser (20221203121727)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121727"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCurrentRoomToUser (20221203121816)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "current_room" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121816"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLastMessageAtToRooms (20221204125908)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "rooms" ADD "last_message_at" timestamp(6)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221204125908"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (20221208105345)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "type" character varying NOT NULL, "params" json, "read_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_recipient" ON "notifications" ("recipient_type", "recipient_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_read_at" ON "notifications" ("read_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221208105345"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUsernameToUsers (20221210084944)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "username" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221210084944"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-12-20 12:28:51.221016"], ["updated_at", "2022-12-20 12:28:51.221016"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5435913384888513870)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "HIPPO"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["email", "55577@pm.me"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 12:28:53.888165"], ["updated_at", "2022-12-20 12:28:53.888165"], ["status", 0], ["role", 1], ["current_room", nil], ["username", "HIPPO"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (1.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "lcamzncn0nftapowsehy6kdzz310"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 12:28:53.944878"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (1.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 1], ["created_at", "2022-12-20 12:28:53.950004"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:28:53.952893"], ["id", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (4.9ms) [0m[32mUploaded file to key: lcamzncn0nftapowsehy6kdzz310 (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 1.6ms | Allocations: 476)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b3743c0e-0fb0-41d1-80a0-bbc83bf4c9d8) to Async(default) with arguments: #<GlobalID:0x0000000110d6a770 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "55577@protonmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "KOALA"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["email", "55577@protonmail.com"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 12:28:54.274367"], ["updated_at", "2022-12-20 12:28:54.274367"], ["status", 0], ["role", 0], ["current_room", nil], ["username", "KOALA"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "cx5b0htskec30h5agoty1ypm977m"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 12:28:54.286085"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 2], ["created_at", "2022-12-20 12:28:54.287529"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:28:54.288656"], ["id", 2]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (2.8ms) [0m[32mUploaded file to key: cx5b0htskec30h5agoty1ypm977m (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3668a63b-e087-417e-b911-b7471e996346) to Async(default) with arguments: #<GlobalID:0x000000011105f318 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "General"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "General"], ["is_private", false], ["created_at", "2022-12-20 12:28:54.310725"], ["updated_at", "2022-12-20 12:28:54.310725"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.8ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 1], ["created_at", "2022-12-20 12:28:54.321477"], ["updated_at", "2022-12-20 12:28:54.321477"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "Testing"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Testing"], ["is_private", false], ["created_at", "2022-12-20 12:28:54.325889"], ["updated_at", "2022-12-20 12:28:54.325889"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 2], ["created_at", "2022-12-20 12:28:54.328265"], ["updated_at", "2022-12-20 12:28:54.328265"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "Bear Room"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bear Room"], ["is_private", false], ["created_at", "2022-12-20 12:28:54.333336"], ["updated_at", "2022-12-20 12:28:54.333336"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 3], ["created_at", "2022-12-20 12:28:54.336410"], ["updated_at", "2022-12-20 12:28:54.336410"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "4vaefyj7gbrhhwkwn40fk3ydalmt"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 453598], ["checksum", "4w/wb+nZnP5Sx2uZuEg0CA=="], ["created_at", "2022-12-20 12:28:54.351221"]]
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 3], ["created_at", "2022-12-20 12:28:54.352555"]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:28:54.353802"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
[36m  Disk Storage (1.7ms) [0m[32mUploaded file to key: 4vaefyj7gbrhhwkwn40fk3ydalmt (checksum: 4w/wb+nZnP5Sx2uZuEg0CA==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 0ed6cd69-159f-458c-83c4-db6e00518360) to Async(default) with arguments: #<GlobalID:0x0000000111612558 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 1c17caa2-d2d7-4dab-9c5a-e50a429a93f3) to Async(default) with arguments: #<GlobalID:0x000000011160baa0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/3>>
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 2]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "t7r4d57972prn0zu2jcyjje15sjq"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 952225], ["checksum", "cyO7UHpW/z9ezbMliIiDqQ=="], ["created_at", "2022-12-20 12:28:54.375541"]]
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 4], ["created_at", "2022-12-20 12:28:54.376868"]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:28:54.378024"], ["id", 2]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[36m  Disk Storage (2.8ms) [0m[32mUploaded file to key: t7r4d57972prn0zu2jcyjje15sjq (checksum: cyO7UHpW/z9ezbMliIiDqQ==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 354ac6a4-b98a-4ceb-80ea-f59c086adde1) to Async(default) with arguments: #<GlobalID:0x0000000111755de8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 38fc70b4-f4a5-4242-99c4-21af6419df15) to Async(default) with arguments: #<GlobalID:0x000000011175fb90 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/4>>
  [1m[36mUser Update All (1.4ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
Started GET "/" for ::1 at 2022-12-20 12:37:25 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PagesController#home as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != $1[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (2.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = $1) ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["is_private", false], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 8.0ms | Allocations: 2143)
  Rendered shared/_links.html.erb (Duration: 0.3ms | Allocations: 95)
  Rendered layouts/_navbar.html.erb (Duration: 1.6ms | Allocations: 489)
  Rendered layout layouts/application.html.erb (Duration: 705.0ms | Allocations: 187319)
Completed 200 OK in 756ms (Views: 708.0ms | ActiveRecord: 9.8ms | Allocations: 206819)


Started GET "/cable" for ::1 at 2022-12-20 12:37:27 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:37:27 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 12:37:27 +0000
Started GET "/cable" for ::1 at 2022-12-20 12:37:27 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:37:27 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 12:37:27 +0000
Started GET "/users/sign_in" for ::1 at 2022-12-20 12:37:30 +0000
Processing by Users::SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.2ms | Allocations: 666)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 31.7ms | Allocations: 7477)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered layouts/_navbar.html.erb (Duration: 0.2ms | Allocations: 139)
  Rendered layout layouts/application.html.erb (Duration: 35.6ms | Allocations: 10912)
Completed 200 OK in 43ms (Views: 38.3ms | ActiveRecord: 0.0ms | Allocations: 13248)


Started POST "/users/sign_in" for ::1 at 2022-12-20 12:37:33 +0000
Processing by Users::SessionsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"email"=>"55577@pm.me", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
Redirected to http://localhost:3000/
Completed 302 Found in 215ms (ActiveRecord: 0.2ms | Allocations: 4708)


Started GET "/" for ::1 at 2022-12-20 12:37:34 +0000
Processing by PagesController#home as TURBO_STREAM
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != $1[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = $1) ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["is_private", false], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 2.0ms | Allocations: 1201)
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.9ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
[36m  Disk Storage (1.3ms) [0m[34mDownloaded file from key: 4vaefyj7gbrhhwkwn40fk3ydalmt[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.9ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "d6374b78tzn17vfdkvkeagysyz7f"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1586], ["checksum", "H8NfB2GN+QkcliWy4K9F1A=="], ["created_at", "2022-12-20 12:37:34.646576"]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 1], ["blob_id", 5], ["created_at", "2022-12-20 12:37:34.649900"]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:34:in `navbar_avatar'
[36m  Disk Storage (0.9ms) [0m[32mUploaded file to key: d6374b78tzn17vfdkvkeagysyz7f (checksum: H8NfB2GN+QkcliWy4K9F1A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4837e4db-3984-416d-b5a6-2716618917d0) to Async(default) with arguments: #<GlobalID:0x0000000109a1d6a0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/5>>
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 547.1ms | Allocations: 68788)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 10)
  Rendered layouts/_navbar.html.erb (Duration: 547.9ms | Allocations: 69085)
  Rendered layout layouts/application.html.erb (Duration: 553.3ms | Allocations: 73493)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  Rendered users/_status.html.erb (Duration: 1.1ms | Allocations: 286)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Completed 200 OK in 573ms (Views: 539.2ms | ActiveRecord: 18.5ms | Allocations: 82285)


[ActiveJob] [ActiveStorage::AnalyzeJob] [4837e4db-3984-416d-b5a6-2716618917d0]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4837e4db-3984-416d-b5a6-2716618917d0] Performing ActiveStorage::AnalyzeJob (Job ID: 4837e4db-3984-416d-b5a6-2716618917d0) from Async(default) enqueued at 2022-12-20T12:37:34Z with arguments: #<GlobalID:0x0000000109954728 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [4837e4db-3984-416d-b5a6-2716618917d0] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: d6374b78tzn17vfdkvkeagysyz7f[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4837e4db-3984-416d-b5a6-2716618917d0]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4837e4db-3984-416d-b5a6-2716618917d0]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":25,\"height\":25,\"analyzed\":true}"], ["id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4837e4db-3984-416d-b5a6-2716618917d0]   [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4837e4db-3984-416d-b5a6-2716618917d0] Performed ActiveStorage::AnalyzeJob (Job ID: 4837e4db-3984-416d-b5a6-2716618917d0) from Async(default) in 19.38ms
Started GET "/cable" for ::1 at 2022-12-20 12:37:34 +0000
Started GET "/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJY0c1bkJqb0dSVlE2RkhKbGMybDZaVjkwYjE5c2FXMXBkRnNIYVI1cEhnPT0iLCJleHAiOm51bGwsInB1ciI6InZhcmlhdGlvbiJ9fQ==--04bce0b1f7bd43c93aab3733d0d8922ee08d72c9/fall_leaves.png" for ::1 at 2022-12-20 12:37:34 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:37:34 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Processing by ActiveStorage::Representations::RedirectController#show as PNG
  Parameters: {"signed_blob_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3", "variation_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vdHVyYm9jaGF0dGVyL1VzZXIvMQ)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (21.4ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[36m  Disk Storage (2.3ms) [0m[34mGenerated URL for file at key: d6374b78tzn17vfdkvkeagysyz7f (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhaRFl6TnpSaU56aDBlbTR4TjNabVpHdDJhMlZoWjNsemVYbzNaZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMjo0MjozNC44MjNaIiwicHVyIjoiYmxvYl9rZXkifX0=--c1d54d8612959616a43eac357fa016ee9817b7e7/fall_leaves.png)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhaRFl6TnpSaU56aDBlbTR4TjNabVpHdDJhMlZoWjNsemVYbzNaZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMjo0MjozNC44MjNaIiwicHVyIjoiYmxvYl9rZXkifX0=--c1d54d8612959616a43eac357fa016ee9817b7e7/fall_leaves.png
Completed 302 Found in 56ms (ActiveRecord: 30.4ms | Allocations: 12024)


Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhaRFl6TnpSaU56aDBlbTR4TjNabVpHdDJhMlZoWjNsemVYbzNaZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMjo0MjozNC44MjNaIiwicHVyIjoiYmxvYl9rZXkifX0=--c1d54d8612959616a43eac357fa016ee9817b7e7/fall_leaves.png" for ::1 at 2022-12-20 12:37:34 +0000
Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 354)


Started GET "/rooms" for ::1 at 2022-12-20 12:37:41 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "status" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2022-12-20 12:37:41.608943"], ["status", 2], ["id", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 85)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.6ms | Allocations: 124)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: 4vaefyj7gbrhhwkwn40fk3ydalmt[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.7ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "ne3jzlk94uvmbyyn7uztc5w9konw"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 5272], ["checksum", "aKAomI0Zw9SbipED8VjQoA=="], ["created_at", "2022-12-20 12:37:41.717644"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 2], ["blob_id", 6], ["created_at", "2022-12-20 12:37:41.719664"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: ne3jzlk94uvmbyyn7uztc5w9konw (checksum: aKAomI0Zw9SbipED8VjQoA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 94179ac6-df06-4b6e-ae06-51c3dbdab57d) to Async(default) with arguments: #<GlobalID:0x0000000109ace5b8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/6>>
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 65)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "private_1_2"], ["is_private", true], ["created_at", "2022-12-20 12:37:41.734077"], ["updated_at", "2022-12-20 12:37:41.734077"], ["last_message_at", nil]]
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mParticipant Create (2.2ms)[0m  [1m[32mINSERT INTO "participants" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["room_id", 4], ["created_at", "2022-12-20 12:37:41.750858"], ["updated_at", "2022-12-20 12:37:41.750858"]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
[ActiveJob] [ActiveStorage::AnalyzeJob] [94179ac6-df06-4b6e-ae06-51c3dbdab57d]   [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [94179ac6-df06-4b6e-ae06-51c3dbdab57d] Performing ActiveStorage::AnalyzeJob (Job ID: 94179ac6-df06-4b6e-ae06-51c3dbdab57d) from Async(default) enqueued at 2022-12-20T12:37:41Z with arguments: #<GlobalID:0x000000010991dca0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/6>>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
[ActiveJob] [ActiveStorage::AnalyzeJob] [94179ac6-df06-4b6e-ae06-51c3dbdab57d] [36m  Disk Storage (0.7ms) [0m[34mDownloaded file from key: ne3jzlk94uvmbyyn7uztc5w9konw[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
[ActiveJob] [ActiveStorage::AnalyzeJob] [94179ac6-df06-4b6e-ae06-51c3dbdab57d]   [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mParticipant Create (0.7ms)[0m  [1m[32mINSERT INTO "participants" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 4], ["created_at", "2022-12-20 12:37:41.760674"], ["updated_at", "2022-12-20 12:37:41.760674"]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
[ActiveJob] [ActiveStorage::AnalyzeJob] [94179ac6-df06-4b6e-ae06-51c3dbdab57d]   [1m[36mActiveStorage::Blob Update (0.6ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":50,\"height\":50,\"analyzed\":true}"], ["id", 6]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [94179ac6-df06-4b6e-ae06-51c3dbdab57d]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
[ActiveJob] [ActiveStorage::AnalyzeJob] [94179ac6-df06-4b6e-ae06-51c3dbdab57d] Performed ActiveStorage::AnalyzeJob (Job ID: 94179ac6-df06-4b6e-ae06-51c3dbdab57d) from Async(default) in 11.21ms
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (1.5ms) [0m[34mDownloaded file from key: t7r4d57972prn0zu2jcyjje15sjq[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "txtkgkkkg16hynwcyejdcmbg5ag0"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 4979], ["checksum", "IrsyuRZoxYOlDudLDVJNFg=="], ["created_at", "2022-12-20 12:37:41.858392"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 3], ["blob_id", 7], ["created_at", "2022-12-20 12:37:41.860089"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: txtkgkkkg16hynwcyejdcmbg5ag0 (checksum: IrsyuRZoxYOlDudLDVJNFg==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9a8beb8e-6a7d-4018-a482-770ed2aabc31) to Async(default) with arguments: #<GlobalID:0x0000000109abcc78 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/7>>
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.6ms | Allocations: 212)
  Rendered users/_user.html.erb (Duration: 95.9ms | Allocations: 14822)
  Rendered users/_users.html.erb (Duration: 142.5ms | Allocations: 44006)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.4ms | Allocations: 945)
  Rendered rooms/_search_results.html.erb (Duration: 0.5ms | Allocations: 209)
  Rendered rooms/_search_form.html.erb (Duration: 3.9ms | Allocations: 1613)
  [1m[36mRoom Load (1.8ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 16.3ms | Allocations: 7218)
  Rendered rooms/_room.html.erb (Duration: 17.5ms | Allocations: 7845)
  Rendered rooms/_rooms.html.erb (Duration: 23.8ms | Allocations: 9990)
  Rendered rooms/index.html.erb within layouts/application (Duration: 270.6ms | Allocations: 71794)
  Rendered layout layouts/application.html.erb (Duration: 270.8ms | Allocations: 71883)
Completed 500 Internal Server Error in 298ms (ActiveRecord: 27.8ms | Allocations: 86967)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
[ActiveJob] [ActiveStorage::AnalyzeJob] [9a8beb8e-6a7d-4018-a482-770ed2aabc31]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9a8beb8e-6a7d-4018-a482-770ed2aabc31] Performing ActiveStorage::AnalyzeJob (Job ID: 9a8beb8e-6a7d-4018-a482-770ed2aabc31) from Async(default) enqueued at 2022-12-20T12:37:41Z with arguments: #<GlobalID:0x0000000109907ae0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9a8beb8e-6a7d-4018-a482-770ed2aabc31] [36m  Disk Storage (206.8ms) [0m[34mDownloaded file from key: txtkgkkkg16hynwcyejdcmbg5ag0[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9a8beb8e-6a7d-4018-a482-770ed2aabc31]   [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9a8beb8e-6a7d-4018-a482-770ed2aabc31]   [1m[36mActiveStorage::Blob Update (0.6ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":50,\"height\":50,\"analyzed\":true}"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9a8beb8e-6a7d-4018-a482-770ed2aabc31]   [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9a8beb8e-6a7d-4018-a482-770ed2aabc31] Performed ActiveStorage::AnalyzeJob (Job ID: 9a8beb8e-6a7d-4018-a482-770ed2aabc31) from Async(default) in 546.99ms
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
Started GET "/rooms" for ::1 at 2022-12-20 12:39:14 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RoomsController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "status" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2022-12-20 12:39:14.191024"], ["status", 2], ["id", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 1.3ms | Allocations: 473)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.7ms | Allocations: 124)
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 68)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (1.0ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.8ms | Allocations: 197)
  Rendered users/_user.html.erb (Duration: 14.9ms | Allocations: 4015)
  Rendered users/_users.html.erb (Duration: 46.0ms | Allocations: 11219)
  Rendered layouts/_new_room_form.html.erb (Duration: 8.6ms | Allocations: 2096)
  Rendered rooms/_search_results.html.erb (Duration: 0.7ms | Allocations: 185)
  Rendered rooms/_search_form.html.erb (Duration: 4.3ms | Allocations: 1502)
  [1m[36mRoom Load (1.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 38.3ms | Allocations: 6651)
  Rendered rooms/_room.html.erb (Duration: 39.8ms | Allocations: 7310)
  Rendered rooms/_rooms.html.erb (Duration: 48.1ms | Allocations: 10276)
  Rendered rooms/index.html.erb within layouts/application (Duration: 224.9ms | Allocations: 75294)
  Rendered layout layouts/application.html.erb (Duration: 225.1ms | Allocations: 75386)
Completed 500 Internal Server Error in 318ms (ActiveRecord: 40.1ms | Allocations: 115568)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
Started GET "/rooms" for ::1 at 2022-12-20 12:39:17 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 80)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 9)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered users/_user.html.erb (Duration: 9.7ms | Allocations: 3215)
  Rendered users/_users.html.erb (Duration: 14.0ms | Allocations: 6127)
  Rendered layouts/_new_room_form.html.erb (Duration: 0.7ms | Allocations: 587)
  Rendered rooms/_search_results.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered rooms/_search_form.html.erb (Duration: 0.9ms | Allocations: 978)
  [1m[36mRoom Load (0.7ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 2.2ms | Allocations: 2912)
  Rendered rooms/_room.html.erb (Duration: 2.5ms | Allocations: 3108)
  Rendered rooms/_rooms.html.erb (Duration: 5.9ms | Allocations: 4653)
  Rendered rooms/index.html.erb within layouts/application (Duration: 26.6ms | Allocations: 15623)
  Rendered layout layouts/application.html.erb (Duration: 26.7ms | Allocations: 15702)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 5.0ms | Allocations: 22581)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
Started GET "/rooms" for ::1 at 2022-12-20 12:44:29 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "status" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2022-12-20 12:44:29.368918"], ["status", 2], ["id", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 1.2ms | Allocations: 473)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.8ms | Allocations: 131)
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (1.5ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 68)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.5ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.8ms | Allocations: 197)
  Rendered users/_user.html.erb (Duration: 10.2ms | Allocations: 4015)
  Rendered users/_users.html.erb (Duration: 30.2ms | Allocations: 11219)
  Rendered layouts/_new_room_form.html.erb (Duration: 7.9ms | Allocations: 2096)
  Rendered rooms/_search_results.html.erb (Duration: 0.7ms | Allocations: 185)
  Rendered rooms/_search_form.html.erb (Duration: 4.0ms | Allocations: 1502)
  [1m[36mRoom Load (1.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 15.5ms | Allocations: 6647)
  Rendered rooms/_room.html.erb (Duration: 17.3ms | Allocations: 7306)
  Rendered rooms/_rooms.html.erb (Duration: 25.2ms | Allocations: 10272)
  Rendered rooms/index.html.erb within layouts/application (Duration: 168.4ms | Allocations: 75595)
  Rendered layout layouts/application.html.erb (Duration: 168.7ms | Allocations: 75687)
Completed 500 Internal Server Error in 266ms (ActiveRecord: 30.1ms | Allocations: 115870)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mUser Update All (1.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (9.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "joinables" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "joinables" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_room_id" ON "joinables" ("room_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_user_id" ON "joinables" ("user_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "messages" CASCADE[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "body" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_messages_on_room_id" ON "messages" ("room_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "notifications" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "type" character varying NOT NULL, "params" json, "read_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_read_at" ON "notifications" ("read_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_recipient" ON "notifications" ("recipient_type", "recipient_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "participants" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "participants" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_participants_on_room_id" ON "participants" ("room_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_participants_on_user_id" ON "participants" ("user_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying, "is_private" boolean DEFAULT FALSE, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "last_message_at" timestamp(6))[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "status" integer DEFAULT 0, "role" integer, "current_room" integer, "username" character varying)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "joinables" ADD CONSTRAINT "fk_rails_e8c38b2805"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "joinables" ADD CONSTRAINT "fk_rails_6e417600dd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_a8db0fb63a"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "participants" ADD CONSTRAINT "fk_rails_08123987c8"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "participants" ADD CONSTRAINT "fk_rails_b9a3c50f15"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "a94950b189d9ab671596c2c839f47059708acf40"], ["created_at", "2022-12-20 12:46:34.808780"], ["updated_at", "2022-12-20 12:46:34.808780"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (1.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (31.3ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "joinables" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "joinables" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_room_id" ON "joinables" ("room_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_user_id" ON "joinables" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "messages" CASCADE[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "body" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_messages_on_room_id" ON "messages" ("room_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "notifications" CASCADE[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "type" character varying NOT NULL, "params" json, "read_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_read_at" ON "notifications" ("read_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_recipient" ON "notifications" ("recipient_type", "recipient_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "participants" CASCADE[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "participants" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_participants_on_room_id" ON "participants" ("room_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_participants_on_user_id" ON "participants" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying, "is_private" boolean DEFAULT FALSE, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "last_message_at" timestamp(6))[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "status" integer DEFAULT 0, "role" integer, "current_room" integer, "username" character varying)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (6.7ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "joinables" ADD CONSTRAINT "fk_rails_e8c38b2805"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "joinables" ADD CONSTRAINT "fk_rails_6e417600dd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_a8db0fb63a"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "participants" ADD CONSTRAINT "fk_rails_08123987c8"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "participants" ADD CONSTRAINT "fk_rails_b9a3c50f15"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20221210084944)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20221129184433),
(20221129184940),
(20221130062651),
(20221130072543),
(20221130080807),
(20221130142248),
(20221203121625),
(20221203121727),
(20221203121816),
(20221204125908),
(20221208105345);

[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-12-20 12:46:35.023780"], ["updated_at", "2022-12-20 12:46:35.023780"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.7ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-12-20 12:46:35.028448"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "a94950b189d9ab671596c2c839f47059708acf40"], ["created_at", "2022-12-20 12:46:35.034165"], ["updated_at", "2022-12-20 12:46:35.034165"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
Started GET "/" for ::1 at 2022-12-20 12:47:01 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PagesController#home as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != $1[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = $1) ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["is_private", false], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 6.0ms | Allocations: 2143)
  Rendered shared/_links.html.erb (Duration: 0.6ms | Allocations: 95)
  Rendered layouts/_navbar.html.erb (Duration: 1.7ms | Allocations: 484)
  Rendered layout layouts/application.html.erb (Duration: 108.4ms | Allocations: 68443)
Completed 200 OK in 142ms (Views: 110.8ms | ActiveRecord: 7.3ms | Allocations: 81070)


Started GET "/cable" for ::1 at 2022-12-20 12:47:02 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:47:02 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 12:47:02 +0000
Started GET "/cable" for ::1 at 2022-12-20 12:47:02 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:47:02 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 12:47:02 +0000
Started GET "/users/sign_in" for ::1 at 2022-12-20 12:47:03 +0000
Processing by Users::SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.2ms | Allocations: 666)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 16.3ms | Allocations: 4640)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered layouts/_navbar.html.erb (Duration: 0.2ms | Allocations: 139)
  Rendered layout layouts/application.html.erb (Duration: 20.9ms | Allocations: 8055)
Completed 200 OK in 32ms (Views: 23.6ms | ActiveRecord: 0.0ms | Allocations: 16129)


Started POST "/users/sign_in" for ::1 at 2022-12-20 12:47:06 +0000
Processing by Users::SessionsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"email"=>"55577@pm.me", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.3ms | Allocations: 1684)


Started GET "/users/sign_in" for ::1 at 2022-12-20 12:47:06 +0000
Processing by Users::SessionsController#new as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.2ms | Allocations: 133)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 1303)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered layouts/_navbar.html.erb (Duration: 0.5ms | Allocations: 137)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | Allocations: 4615)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.0ms | Allocations: 5566)


  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "HIPPO"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["email", "55577@pm.me"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 12:47:17.863986"], ["updated_at", "2022-12-20 12:47:17.863986"], ["status", 0], ["role", 1], ["current_room", nil], ["username", "HIPPO"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "a96045lolnku1p8z1kvxh358e4wu"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 12:47:17.919869"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 1], ["created_at", "2022-12-20 12:47:17.922225"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:47:17.923890"], ["id", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (3.9ms) [0m[32mUploaded file to key: a96045lolnku1p8z1kvxh358e4wu (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 1.3ms | Allocations: 476)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 72cb4fe5-15d0-4bda-82e2-5541268b67b4) to Async(default) with arguments: #<GlobalID:0x0000000108d09450 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "55577@protonmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "KOALA"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["email", "55577@protonmail.com"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 12:47:18.215261"], ["updated_at", "2022-12-20 12:47:18.215261"], ["status", 0], ["role", 0], ["current_room", nil], ["username", "KOALA"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "6cjffqrivkgogg1yxjvywf6auae9"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 12:47:18.242066"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 2], ["created_at", "2022-12-20 12:47:18.243842"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:47:18.245532"], ["id", 2]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (4.0ms) [0m[32mUploaded file to key: 6cjffqrivkgogg1yxjvywf6auae9 (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 693ef6da-97fb-4663-a084-eba576ed8cc7) to Async(default) with arguments: #<GlobalID:0x0000000107754e70 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "General"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.4ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "General"], ["is_private", false], ["created_at", "2022-12-20 12:47:18.269829"], ["updated_at", "2022-12-20 12:47:18.269829"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (1.0ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 1], ["created_at", "2022-12-20 12:47:18.280648"], ["updated_at", "2022-12-20 12:47:18.280648"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "Testing"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Testing"], ["is_private", false], ["created_at", "2022-12-20 12:47:18.286835"], ["updated_at", "2022-12-20 12:47:18.286835"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 2], ["created_at", "2022-12-20 12:47:18.289809"], ["updated_at", "2022-12-20 12:47:18.289809"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "Bear Room"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bear Room"], ["is_private", false], ["created_at", "2022-12-20 12:47:18.294547"], ["updated_at", "2022-12-20 12:47:18.294547"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 3], ["created_at", "2022-12-20 12:47:18.297333"], ["updated_at", "2022-12-20 12:47:18.297333"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 1]]
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "cu15qmqvwt4oxkteyefekv7k5715"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 453598], ["checksum", "4w/wb+nZnP5Sx2uZuEg0CA=="], ["created_at", "2022-12-20 12:47:18.311583"]]
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 3], ["created_at", "2022-12-20 12:47:18.313497"]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:47:18.314897"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
[36m  Disk Storage (2.9ms) [0m[32mUploaded file to key: cu15qmqvwt4oxkteyefekv7k5715 (checksum: 4w/wb+nZnP5Sx2uZuEg0CA==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 1b34915f-b351-4351-8482-6b8a9bf08426) to Async(default) with arguments: #<GlobalID:0x0000000108643530 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 15c3cd87-de25-4ac0-9700-f3fad38e7c05) to Async(default) with arguments: #<GlobalID:0x0000000108640218 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/3>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 2]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "g9g26uqonchchtpdjuot6cwemdlj"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 952225], ["checksum", "cyO7UHpW/z9ezbMliIiDqQ=="], ["created_at", "2022-12-20 12:47:18.337626"]]
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 4], ["created_at", "2022-12-20 12:47:18.339220"]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:47:18.340579"], ["id", 2]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[36m  Disk Storage (3.7ms) [0m[32mUploaded file to key: g9g26uqonchchtpdjuot6cwemdlj (checksum: cyO7UHpW/z9ezbMliIiDqQ==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 1857e962-1545-442b-ab20-f4d3789a9fc4) to Async(default) with arguments: #<GlobalID:0x00000001087ba800 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 5d79a748-100d-478d-b4bf-089d30b8dc2e) to Async(default) with arguments: #<GlobalID:0x00000001087b2150 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/4>>
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
Started GET "/users/sign_in" for ::1 at 2022-12-20 12:47:27 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Users::SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.4ms | Allocations: 679)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 10.9ms | Allocations: 4983)
  Rendered shared/_links.html.erb (Duration: 1.3ms | Allocations: 88)
  Rendered layouts/_navbar.html.erb (Duration: 9.3ms | Allocations: 469)
  Rendered layout layouts/application.html.erb (Duration: 139.2ms | Allocations: 70823)
Completed 200 OK in 170ms (Views: 147.9ms | ActiveRecord: 0.0ms | Allocations: 81632)


Started GET "/cable" for ::1 at 2022-12-20 12:47:28 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:47:28 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 12:47:28 +0000
Started POST "/users/sign_in" for ::1 at 2022-12-20 12:47:31 +0000
Processing by Users::SessionsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"email"=>"55577@pm.me", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
Redirected to http://localhost:3000/
Completed 302 Found in 214ms (ActiveRecord: 1.3ms | Allocations: 5391)


Started GET "/" for ::1 at 2022-12-20 12:47:31 +0000
Processing by PagesController#home as TURBO_STREAM
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != $1[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (1.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = $1) ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["is_private", false], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 6.1ms | Allocations: 2202)
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
[36m  Disk Storage (1.2ms) [0m[34mDownloaded file from key: cu15qmqvwt4oxkteyefekv7k5715[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.8ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "ovbsxmbtc1xh0svtv7ig0pj17zyd"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1586], ["checksum", "H8NfB2GN+QkcliWy4K9F1A=="], ["created_at", "2022-12-20 12:47:32.182815"]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Attachment Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 1], ["blob_id", 5], ["created_at", "2022-12-20 12:47:32.185493"]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:34:in `navbar_avatar'
[36m  Disk Storage (1.0ms) [0m[32mUploaded file to key: ovbsxmbtc1xh0svtv7ig0pj17zyd (checksum: H8NfB2GN+QkcliWy4K9F1A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4c2c5596-084f-473e-aaf6-19c2ad83ae61) to Async(default) with arguments: #<GlobalID:0x000000010c3d8f08 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/5>>
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 429.5ms | Allocations: 61171)
  Rendered shared/_links.html.erb (Duration: 0.1ms | Allocations: 11)
  Rendered layouts/_navbar.html.erb (Duration: 431.0ms | Allocations: 61477)
  Rendered layout layouts/application.html.erb (Duration: 441.5ms | Allocations: 66995)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  Rendered users/_status.html.erb (Duration: 2.5ms | Allocations: 322)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Completed 200 OK in 477ms (Views: 430.2ms | ActiveRecord: 21.2ms | Allocations: 82266)


[ActiveJob] [ActiveStorage::AnalyzeJob] [4c2c5596-084f-473e-aaf6-19c2ad83ae61]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4c2c5596-084f-473e-aaf6-19c2ad83ae61] Performing ActiveStorage::AnalyzeJob (Job ID: 4c2c5596-084f-473e-aaf6-19c2ad83ae61) from Async(default) enqueued at 2022-12-20T12:47:32Z with arguments: #<GlobalID:0x000000010c2bea00 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [4c2c5596-084f-473e-aaf6-19c2ad83ae61] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: ovbsxmbtc1xh0svtv7ig0pj17zyd[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4c2c5596-084f-473e-aaf6-19c2ad83ae61]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/cable" for ::1 at 2022-12-20 12:47:32 +0000
[ActiveJob] [ActiveStorage::AnalyzeJob] [4c2c5596-084f-473e-aaf6-19c2ad83ae61]   [1m[36mActiveStorage::Blob Update (8.7ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":25,\"height\":25,\"analyzed\":true}"], ["id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4c2c5596-084f-473e-aaf6-19c2ad83ae61]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4c2c5596-084f-473e-aaf6-19c2ad83ae61] Performed ActiveStorage::AnalyzeJob (Job ID: 4c2c5596-084f-473e-aaf6-19c2ad83ae61) from Async(default) in 44.72ms
Started GET "/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJY0c1bkJqb0dSVlE2RkhKbGMybDZaVjkwYjE5c2FXMXBkRnNIYVI1cEhnPT0iLCJleHAiOm51bGwsInB1ciI6InZhcmlhdGlvbiJ9fQ==--04bce0b1f7bd43c93aab3733d0d8922ee08d72c9/fall_leaves.png" for ::1 at 2022-12-20 12:47:32 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:47:32 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vdHVyYm9jaGF0dGVyL1VzZXIvMQ)
Processing by ActiveStorage::Representations::RedirectController#show as PNG
  Parameters: {"signed_blob_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3", "variation_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.6ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[36m  Disk Storage (3.5ms) [0m[34mGenerated URL for file at key: ovbsxmbtc1xh0svtv7ig0pj17zyd (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhiM1ppYzNodFluUmpNWGhvTUhOMmRIWTNhV2N3Y0dveE4zcDVaQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMjo1MjozMi4zMzlaIiwicHVyIjoiYmxvYl9rZXkifX0=--a6166149acba02abb6ba266cfc12c4e50a2dccd6/fall_leaves.png)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhiM1ppYzNodFluUmpNWGhvTUhOMmRIWTNhV2N3Y0dveE4zcDVaQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMjo1MjozMi4zMzlaIiwicHVyIjoiYmxvYl9rZXkifX0=--a6166149acba02abb6ba266cfc12c4e50a2dccd6/fall_leaves.png
Completed 302 Found in 30ms (ActiveRecord: 2.3ms | Allocations: 7001)


Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhiM1ppYzNodFluUmpNWGhvTUhOMmRIWTNhV2N3Y0dveE4zcDVaQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMjo1MjozMi4zMzlaIiwicHVyIjoiYmxvYl9rZXkifX0=--a6166149acba02abb6ba266cfc12c4e50a2dccd6/fall_leaves.png" for ::1 at 2022-12-20 12:47:32 +0000
Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 354)


Started GET "/rooms" for ::1 at 2022-12-20 12:47:33 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "status" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2022-12-20 12:47:33.825669"], ["status", 2], ["id", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 85)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.6ms | Allocations: 124)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: cu15qmqvwt4oxkteyefekv7k5715[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "mhobxtri80ahsvsxig7u96bodylj"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 5272], ["checksum", "aKAomI0Zw9SbipED8VjQoA=="], ["created_at", "2022-12-20 12:47:33.937435"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 2], ["blob_id", 6], ["created_at", "2022-12-20 12:47:33.939094"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: mhobxtri80ahsvsxig7u96bodylj (checksum: aKAomI0Zw9SbipED8VjQoA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e3156683-cf2d-44fc-be64-f2d4466ea1cf) to Async(default) with arguments: #<GlobalID:0x000000010c4bb920 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/6>>
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 65)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mRoom Create (0.5ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "private_1_2"], ["is_private", true], ["created_at", "2022-12-20 12:47:33.953587"], ["updated_at", "2022-12-20 12:47:33.953587"], ["last_message_at", nil]]
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mParticipant Create (0.8ms)[0m  [1m[32mINSERT INTO "participants" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["room_id", 4], ["created_at", "2022-12-20 12:47:33.968831"], ["updated_at", "2022-12-20 12:47:33.968831"]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mParticipant Create (0.3ms)[0m  [1m[32mINSERT INTO "participants" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 4], ["created_at", "2022-12-20 12:47:33.974739"], ["updated_at", "2022-12-20 12:47:33.974739"]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (1.5ms) [0m[34mDownloaded file from key: g9g26uqonchchtpdjuot6cwemdlj[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e3156683-cf2d-44fc-be64-f2d4466ea1cf]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e3156683-cf2d-44fc-be64-f2d4466ea1cf] Performing ActiveStorage::AnalyzeJob (Job ID: e3156683-cf2d-44fc-be64-f2d4466ea1cf) from Async(default) enqueued at 2022-12-20T12:47:33Z with arguments: #<GlobalID:0x000000010c0f0070 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [e3156683-cf2d-44fc-be64-f2d4466ea1cf] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: mhobxtri80ahsvsxig7u96bodylj[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e3156683-cf2d-44fc-be64-f2d4466ea1cf]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e3156683-cf2d-44fc-be64-f2d4466ea1cf]   [1m[36mActiveStorage::Blob Update (0.5ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":50,\"height\":50,\"analyzed\":true}"], ["id", 6]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e3156683-cf2d-44fc-be64-f2d4466ea1cf]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e3156683-cf2d-44fc-be64-f2d4466ea1cf] Performed ActiveStorage::AnalyzeJob (Job ID: e3156683-cf2d-44fc-be64-f2d4466ea1cf) from Async(default) in 36.27ms
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "5q4od1vk56ygiynv1ghh9mshhoy1"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 4979], ["checksum", "IrsyuRZoxYOlDudLDVJNFg=="], ["created_at", "2022-12-20 12:47:34.078208"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 3], ["blob_id", 7], ["created_at", "2022-12-20 12:47:34.080435"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: 5q4od1vk56ygiynv1ghh9mshhoy1 (checksum: IrsyuRZoxYOlDudLDVJNFg==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 61a3d05e-122b-4a7a-9397-c9dac19cc8ca) to Async(default) with arguments: #<GlobalID:0x000000010c4b12b8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/7>>
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.6ms | Allocations: 211)
  Rendered users/_user.html.erb (Duration: 106.0ms | Allocations: 21254)
  Rendered users/_users.html.erb (Duration: 142.7ms | Allocations: 46201)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.5ms | Allocations: 929)
  Rendered rooms/_search_results.html.erb (Duration: 0.5ms | Allocations: 211)
  Rendered rooms/_search_form.html.erb (Duration: 2.7ms | Allocations: 1515)
  [1m[36mRoom Load (1.0ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (1.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 10.5ms | Allocations: 6356)
  Rendered rooms/_room.html.erb (Duration: 12.5ms | Allocations: 6977)
  Rendered rooms/_rooms.html.erb (Duration: 18.6ms | Allocations: 9154)
  Rendered rooms/index.html.erb within layouts/application (Duration: 268.4ms | Allocations: 73024)
  Rendered layout layouts/application.html.erb (Duration: 268.6ms | Allocations: 73109)
Completed 500 Internal Server Error in 293ms (ActiveRecord: 20.9ms | Allocations: 88147)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
[ActiveJob] [ActiveStorage::AnalyzeJob] [61a3d05e-122b-4a7a-9397-c9dac19cc8ca]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [61a3d05e-122b-4a7a-9397-c9dac19cc8ca] Performing ActiveStorage::AnalyzeJob (Job ID: 61a3d05e-122b-4a7a-9397-c9dac19cc8ca) from Async(default) enqueued at 2022-12-20T12:47:34Z with arguments: #<GlobalID:0x000000010bdf36d8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [61a3d05e-122b-4a7a-9397-c9dac19cc8ca] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: 5q4od1vk56ygiynv1ghh9mshhoy1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [61a3d05e-122b-4a7a-9397-c9dac19cc8ca]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/rooms" for ::1 at 2022-12-20 12:47:34 +0000
[ActiveJob] [ActiveStorage::AnalyzeJob] [61a3d05e-122b-4a7a-9397-c9dac19cc8ca]   [1m[36mActiveStorage::Blob Update (0.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":50,\"height\":50,\"analyzed\":true}"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [61a3d05e-122b-4a7a-9397-c9dac19cc8ca]   [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [61a3d05e-122b-4a7a-9397-c9dac19cc8ca] Performed ActiveStorage::AnalyzeJob (Job ID: 61a3d05e-122b-4a7a-9397-c9dac19cc8ca) from Async(default) in 12.4ms
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 85)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.5ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 9)
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered users/_user.html.erb (Duration: 5.9ms | Allocations: 5050)
  Rendered users/_users.html.erb (Duration: 12.0ms | Allocations: 11304)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.1ms | Allocations: 585)
  Rendered rooms/_search_results.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered rooms/_search_form.html.erb (Duration: 0.9ms | Allocations: 1009)
  [1m[36mRoom Load (0.8ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 2.5ms | Allocations: 3475)
  Rendered rooms/_room.html.erb (Duration: 2.8ms | Allocations: 3677)
  Rendered rooms/_rooms.html.erb (Duration: 6.5ms | Allocations: 6379)
  Rendered rooms/index.html.erb within layouts/application (Duration: 27.8ms | Allocations: 26645)
  Rendered layout layouts/application.html.erb (Duration: 28.0ms | Allocations: 26754)
Completed 500 Internal Server Error in 44ms (ActiveRecord: 8.0ms | Allocations: 42376)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
Started POST "/__web_console/repl_sessions/09eb4c01fb4fafc574ade593ae391b8e/trace" for ::1 at 2022-12-20 12:47:40 +0000
Started GET "/rooms" for ::1 at 2022-12-20 12:48:11 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 107)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 12)
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 68)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered users/_user.html.erb (Duration: 5.5ms | Allocations: 3382)
  Rendered users/_users.html.erb (Duration: 16.1ms | Allocations: 9636)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.1ms | Allocations: 660)
  Rendered rooms/_search_results.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered rooms/_search_form.html.erb (Duration: 1.0ms | Allocations: 866)
  [1m[36mRoom Load (0.6ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 6.2ms | Allocations: 5059)
  Rendered rooms/_room.html.erb (Duration: 6.6ms | Allocations: 5270)
  Rendered rooms/_rooms.html.erb (Duration: 10.9ms | Allocations: 6865)
  Rendered rooms/index.html.erb within layouts/application (Duration: 56.6ms | Allocations: 33240)
  Rendered layout layouts/application.html.erb (Duration: 56.8ms | Allocations: 33325)
Completed 500 Internal Server Error in 111ms (ActiveRecord: 23.7ms | Allocations: 58298)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
Started GET "/rooms" for ::1 at 2022-12-20 12:48:27 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 77)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 9)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.4ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered users/_user.html.erb (Duration: 5.4ms | Allocations: 3221)
  Rendered users/_users.html.erb (Duration: 10.7ms | Allocations: 6140)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.0ms | Allocations: 587)
  Rendered rooms/_search_results.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered rooms/_search_form.html.erb (Duration: 0.5ms | Allocations: 986)
  [1m[36mRoom Load (0.6ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 2.3ms | Allocations: 2890)
  Rendered rooms/_room.html.erb (Duration: 2.6ms | Allocations: 3086)
  Rendered rooms/_rooms.html.erb (Duration: 5.9ms | Allocations: 4634)
  Rendered rooms/index.html.erb within layouts/application (Duration: 23.9ms | Allocations: 15623)
  Rendered layout layouts/application.html.erb (Duration: 24.0ms | Allocations: 15702)
Completed 500 Internal Server Error in 37ms (ActiveRecord: 4.8ms | Allocations: 22449)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
Started GET "/rooms" for ::1 at 2022-12-20 12:48:32 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 107)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 12)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 68)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered users/_user.html.erb (Duration: 5.3ms | Allocations: 3375)
  Rendered users/_users.html.erb (Duration: 18.2ms | Allocations: 9614)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.1ms | Allocations: 660)
  Rendered rooms/_search_results.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered rooms/_search_form.html.erb (Duration: 0.5ms | Allocations: 860)
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 7.8ms | Allocations: 5010)
  Rendered rooms/_room.html.erb (Duration: 8.2ms | Allocations: 5221)
  Rendered rooms/_rooms.html.erb (Duration: 11.8ms | Allocations: 6812)
  Rendered rooms/index.html.erb within layouts/application (Duration: 80.8ms | Allocations: 33098)
  Rendered layout layouts/application.html.erb (Duration: 80.9ms | Allocations: 33183)
Completed 500 Internal Server Error in 155ms (ActiveRecord: 35.3ms | Allocations: 58034)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (64.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbochatter_development"[0m
  [1m[35m (47.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbochatter_test"[0m
  [1m[35m (254.3ms)[0m  [1m[35mCREATE DATABASE "turbochatter_development" ENCODING = 'unicode'[0m
  [1m[35m (127.2ms)[0m  [1m[35mCREATE DATABASE "turbochatter_test" ENCODING = 'unicode'[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5435913384888513870)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20221129184433)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221129184433"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRooms (20221129184940)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying, "is_private" boolean DEFAULT FALSE, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221129184940"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateMessages (20221130062651)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "body" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_a8db0fb63a"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_messages_on_room_id" ON "messages" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130062651"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipants (20221130072543)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "participants" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b9a3c50f15"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_08123987c8"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_participants_on_user_id" ON "participants" ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_participants_on_room_id" ON "participants" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130072543"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20221130080807)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130080807"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddStatusToUsers (20221130142248)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "status" integer DEFAULT 0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130142248"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateJoinables (20221203121625)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.8ms)[0m  [1m[35mCREATE TABLE "joinables" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_6e417600dd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_e8c38b2805"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_user_id" ON "joinables" ("user_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_room_id" ON "joinables" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121625"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUser (20221203121727)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121727"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCurrentRoomToUser (20221203121816)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "current_room" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121816"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLastMessageAtToRooms (20221204125908)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "rooms" ADD "last_message_at" timestamp(6)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221204125908"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (20221208105345)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "type" character varying NOT NULL, "params" json, "read_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_recipient" ON "notifications" ("recipient_type", "recipient_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_read_at" ON "notifications" ("read_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221208105345"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUsernameToUsers (20221210084944)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "username" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221210084944"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-12-20 12:51:36.994111"], ["updated_at", "2022-12-20 12:51:36.994111"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5435913384888513870)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "HIPPO"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["email", "55577@pm.me"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 12:51:39.555842"], ["updated_at", "2022-12-20 12:51:39.555842"], ["status", 0], ["role", 1], ["current_room", nil], ["username", "HIPPO"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "w59k684imiuvqlzb4gxsep3aqmsv"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 12:51:39.619338"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (1.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 1], ["created_at", "2022-12-20 12:51:39.621273"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:51:39.623314"], ["id", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (3.1ms) [0m[32mUploaded file to key: w59k684imiuvqlzb4gxsep3aqmsv (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 1.5ms | Allocations: 476)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 952068ea-ee1a-46e8-9662-fb8ab0ff62bb) to Async(default) with arguments: #<GlobalID:0x000000010cd386e8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "55577@protonmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "KOALA"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["email", "55577@protonmail.com"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 12:51:39.913149"], ["updated_at", "2022-12-20 12:51:39.913149"], ["status", 0], ["role", 0], ["current_room", nil], ["username", "KOALA"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "9tx4hmhnu3ptz5u2mxp61ca67fmh"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 12:51:39.925919"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 2], ["created_at", "2022-12-20 12:51:39.927354"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:51:39.928408"], ["id", 2]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (3.1ms) [0m[32mUploaded file to key: 9tx4hmhnu3ptz5u2mxp61ca67fmh (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c615afdb-9567-479f-ab2b-1be20934a097) to Async(default) with arguments: #<GlobalID:0x000000010ce495c8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "General"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "General"], ["is_private", false], ["created_at", "2022-12-20 12:51:39.951786"], ["updated_at", "2022-12-20 12:51:39.951786"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.9ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 1], ["created_at", "2022-12-20 12:51:39.962251"], ["updated_at", "2022-12-20 12:51:39.962251"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "Testing"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Testing"], ["is_private", false], ["created_at", "2022-12-20 12:51:39.966918"], ["updated_at", "2022-12-20 12:51:39.966918"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 2], ["created_at", "2022-12-20 12:51:39.969319"], ["updated_at", "2022-12-20 12:51:39.969319"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "Bear Room"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.4ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bear Room"], ["is_private", false], ["created_at", "2022-12-20 12:51:39.974780"], ["updated_at", "2022-12-20 12:51:39.974780"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 3], ["created_at", "2022-12-20 12:51:39.977504"], ["updated_at", "2022-12-20 12:51:39.977504"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "aqt7jzbrxxnb2tfcj4et8b378p8l"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 453598], ["checksum", "4w/wb+nZnP5Sx2uZuEg0CA=="], ["created_at", "2022-12-20 12:51:39.991855"]]
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 3], ["created_at", "2022-12-20 12:51:39.993249"]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:51:39.994406"], ["id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[36m  Disk Storage (1.6ms) [0m[32mUploaded file to key: aqt7jzbrxxnb2tfcj4et8b378p8l (checksum: 4w/wb+nZnP5Sx2uZuEg0CA==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 6feb53ca-018b-4364-8720-440732a59134) to Async(default) with arguments: #<GlobalID:0x000000010d173f28 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 6e5f3e57-3c48-4aff-ba36-1d63aeaaae3b) to Async(default) with arguments: #<GlobalID:0x000000010d171b60 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/3>>
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (10.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 2]]
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "y3np4o04n5npnzlhfg82kvmug7gz"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 952225], ["checksum", "cyO7UHpW/z9ezbMliIiDqQ=="], ["created_at", "2022-12-20 12:51:40.031869"]]
  [1m[36mActiveStorage::Attachment Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 4], ["created_at", "2022-12-20 12:51:40.033891"]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:51:40.035788"], ["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
[36m  Disk Storage (3.8ms) [0m[32mUploaded file to key: y3np4o04n5npnzlhfg82kvmug7gz (checksum: cyO7UHpW/z9ezbMliIiDqQ==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: a134f839-595b-4496-8deb-675eb0cdb762) to Async(default) with arguments: #<GlobalID:0x000000010d260e90 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 58ea6e1c-0da3-41e0-a79e-b7ec1da7d745) to Async(default) with arguments: #<GlobalID:0x000000010d26ac38 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/4>>
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (52.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbochatter_development"[0m
  [1m[35m (33.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbochatter_test"[0m
  [1m[35m (157.1ms)[0m  [1m[35mCREATE DATABASE "turbochatter_development" ENCODING = 'unicode'[0m
  [1m[35m (97.3ms)[0m  [1m[35mCREATE DATABASE "turbochatter_test" ENCODING = 'unicode'[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5435913384888513870)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20221129184433)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221129184433"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRooms (20221129184940)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (34.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "hstore"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying, "hstore" character varying, "is_private" boolean DEFAULT FALSE, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221129184940"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateMessages (20221130062651)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "body" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_a8db0fb63a"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_messages_on_room_id" ON "messages" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130062651"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipants (20221130072543)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.5ms)[0m  [1m[35mCREATE TABLE "participants" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b9a3c50f15"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_08123987c8"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_participants_on_user_id" ON "participants" ("user_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_participants_on_room_id" ON "participants" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130072543"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20221130080807)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130080807"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddStatusToUsers (20221130142248)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "status" integer DEFAULT 0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130142248"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateJoinables (20221203121625)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "joinables" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_6e417600dd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_e8c38b2805"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_user_id" ON "joinables" ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_room_id" ON "joinables" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121625"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUser (20221203121727)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121727"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCurrentRoomToUser (20221203121816)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "current_room" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121816"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLastMessageAtToRooms (20221204125908)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "rooms" ADD "last_message_at" timestamp(6)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221204125908"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (20221208105345)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "type" character varying NOT NULL, "params" json, "read_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_recipient" ON "notifications" ("recipient_type", "recipient_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_read_at" ON "notifications" ("read_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221208105345"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUsernameToUsers (20221210084944)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "username" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221210084944"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-12-20 12:55:19.742990"], ["updated_at", "2022-12-20 12:55:19.742990"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5435913384888513870)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "HIPPO"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["email", "55577@pm.me"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 12:55:22.309577"], ["updated_at", "2022-12-20 12:55:22.309577"], ["status", 0], ["role", 1], ["current_room", nil], ["username", "HIPPO"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (1.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "vz3e8lanx7lyn8hh54p5re0ur44d"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 12:55:22.379028"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 1], ["created_at", "2022-12-20 12:55:22.382186"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:55:22.383906"], ["id", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (3.4ms) [0m[32mUploaded file to key: vz3e8lanx7lyn8hh54p5re0ur44d (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 1.3ms | Allocations: 476)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9445ea28-aff5-4c51-9b74-5cd3d50e8874) to Async(default) with arguments: #<GlobalID:0x0000000106ff8708 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "55577@protonmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "KOALA"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["email", "55577@protonmail.com"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 12:55:22.680699"], ["updated_at", "2022-12-20 12:55:22.680699"], ["status", 0], ["role", 0], ["current_room", nil], ["username", "KOALA"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "dupnhta2xtteyj1r8gk67j5pzjz3"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 12:55:22.692895"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 2], ["created_at", "2022-12-20 12:55:22.695287"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:55:22.696835"], ["id", 2]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (2.9ms) [0m[32mUploaded file to key: dupnhta2xtteyj1r8gk67j5pzjz3 (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d32d4ef1-ad7d-4eed-834d-e1a4f056e483) to Async(default) with arguments: #<GlobalID:0x000000010716e290 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "General"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.7ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "hstore", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "General"], ["hstore", nil], ["is_private", false], ["created_at", "2022-12-20 12:55:22.737153"], ["updated_at", "2022-12-20 12:55:22.737153"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (1.2ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 1], ["created_at", "2022-12-20 12:55:22.754721"], ["updated_at", "2022-12-20 12:55:22.754721"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "Testing"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "hstore", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Testing"], ["hstore", nil], ["is_private", false], ["created_at", "2022-12-20 12:55:22.762239"], ["updated_at", "2022-12-20 12:55:22.762239"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.4ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 2], ["created_at", "2022-12-20 12:55:22.765883"], ["updated_at", "2022-12-20 12:55:22.765883"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "Bear Room"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "hstore", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bear Room"], ["hstore", nil], ["is_private", false], ["created_at", "2022-12-20 12:55:22.772382"], ["updated_at", "2022-12-20 12:55:22.772382"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 3], ["created_at", "2022-12-20 12:55:22.775075"], ["updated_at", "2022-12-20 12:55:22.775075"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "eeeel76nztyuzktwbzbfhvf8oueg"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 453598], ["checksum", "4w/wb+nZnP5Sx2uZuEg0CA=="], ["created_at", "2022-12-20 12:55:22.790370"]]
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 3], ["created_at", "2022-12-20 12:55:22.791821"]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:55:22.793041"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
[36m  Disk Storage (1.9ms) [0m[32mUploaded file to key: eeeel76nztyuzktwbzbfhvf8oueg (checksum: 4w/wb+nZnP5Sx2uZuEg0CA==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 82f46088-a1a7-415c-a4a0-2b1c4b633598) to Async(default) with arguments: #<GlobalID:0x0000000107510ee8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a2021a56-673b-4846-94ff-422516d05700) to Async(default) with arguments: #<GlobalID:0x000000010751a858 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/3>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 2]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "0zpiowwo5nmmf5ozj7d4ss8myd7d"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 952225], ["checksum", "cyO7UHpW/z9ezbMliIiDqQ=="], ["created_at", "2022-12-20 12:55:22.815509"]]
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 4], ["created_at", "2022-12-20 12:55:22.816829"]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1 WHERE "users"."id" = $2[0m  [["updated_at", "2022-12-20 12:55:22.818084"], ["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
[36m  Disk Storage (3.0ms) [0m[32mUploaded file to key: 0zpiowwo5nmmf5ozj7d4ss8myd7d (checksum: cyO7UHpW/z9ezbMliIiDqQ==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: d30d6157-ef28-493f-8e04-99ea4f0da559) to Async(default) with arguments: #<GlobalID:0x0000000107609e30 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8c0a6b21-81b0-47af-954b-abc64fcfa53e) to Async(default) with arguments: #<GlobalID:0x0000000107613d68 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/4>>
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
Started GET "/" for ::1 at 2022-12-20 12:55:45 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PagesController#home as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != $1[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (2.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = $1) ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["is_private", false], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 7.9ms | Allocations: 2143)
  Rendered shared/_links.html.erb (Duration: 0.9ms | Allocations: 95)
  Rendered layouts/_navbar.html.erb (Duration: 2.5ms | Allocations: 484)
  Rendered layout layouts/application.html.erb (Duration: 139.1ms | Allocations: 68413)
Completed 200 OK in 202ms (Views: 142.3ms | ActiveRecord: 11.7ms | Allocations: 87136)


Started GET "/cable" for ::1 at 2022-12-20 12:55:46 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:55:46 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Started GET "/cable" for ::1 at 2022-12-20 12:55:46 +0000
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 12:55:47 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:55:47 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 12:55:47 +0000
Started GET "/users/sign_in" for ::1 at 2022-12-20 12:55:48 +0000
Processing by Users::SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.5ms | Allocations: 666)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 44.3ms | Allocations: 4640)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered layouts/_navbar.html.erb (Duration: 0.2ms | Allocations: 139)
  Rendered layout layouts/application.html.erb (Duration: 48.4ms | Allocations: 8055)
Completed 200 OK in 67ms (Views: 63.7ms | ActiveRecord: 0.0ms | Allocations: 10187)


Started POST "/users/sign_in" for ::1 at 2022-12-20 12:55:52 +0000
Processing by Users::SessionsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"email"=>"55577@pm.me", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
Redirected to http://localhost:3000/
Completed 302 Found in 208ms (ActiveRecord: 0.3ms | Allocations: 4105)


Started GET "/" for ::1 at 2022-12-20 12:55:52 +0000
Processing by PagesController#home as TURBO_STREAM
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != $1[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = $1) ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["is_private", false], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 2.0ms | Allocations: 1201)
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (1.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
[36m  Disk Storage (1.3ms) [0m[34mDownloaded file from key: eeeel76nztyuzktwbzbfhvf8oueg[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Create (1.1ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "vzg2i8x6t13jvyn1u1dcdf24pz1j"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1586], ["checksum", "H8NfB2GN+QkcliWy4K9F1A=="], ["created_at", "2022-12-20 12:55:52.819519"]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 1], ["blob_id", 5], ["created_at", "2022-12-20 12:55:52.821568"]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:34:in `navbar_avatar'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: vzg2i8x6t13jvyn1u1dcdf24pz1j (checksum: H8NfB2GN+QkcliWy4K9F1A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e0ce7e47-2747-4532-9c0d-403faa0d9516) to Async(default) with arguments: #<GlobalID:0x000000010c829468 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/5>>
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 444.5ms | Allocations: 61253)
  Rendered shared/_links.html.erb (Duration: 0.1ms | Allocations: 10)
  Rendered layouts/_navbar.html.erb (Duration: 445.4ms | Allocations: 61553)
  Rendered layout layouts/application.html.erb (Duration: 451.3ms | Allocations: 65957)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  Rendered users/_status.html.erb (Duration: 1.6ms | Allocations: 262)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Completed 200 OK in 469ms (Views: 439.4ms | ActiveRecord: 14.6ms | Allocations: 74743)


[ActiveJob] [ActiveStorage::AnalyzeJob] [e0ce7e47-2747-4532-9c0d-403faa0d9516]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0ce7e47-2747-4532-9c0d-403faa0d9516] Performing ActiveStorage::AnalyzeJob (Job ID: e0ce7e47-2747-4532-9c0d-403faa0d9516) from Async(default) enqueued at 2022-12-20T12:55:52Z with arguments: #<GlobalID:0x000000010c72a850 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0ce7e47-2747-4532-9c0d-403faa0d9516] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: vzg2i8x6t13jvyn1u1dcdf24pz1j[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0ce7e47-2747-4532-9c0d-403faa0d9516]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0ce7e47-2747-4532-9c0d-403faa0d9516]   [1m[36mActiveStorage::Blob Update (0.5ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":25,\"height\":25,\"analyzed\":true}"], ["id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0ce7e47-2747-4532-9c0d-403faa0d9516]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0ce7e47-2747-4532-9c0d-403faa0d9516] Performed ActiveStorage::AnalyzeJob (Job ID: e0ce7e47-2747-4532-9c0d-403faa0d9516) from Async(default) in 10.57ms
Started GET "/cable" for ::1 at 2022-12-20 12:55:52 +0000
Started GET "/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJY0c1bkJqb0dSVlE2RkhKbGMybDZaVjkwYjE5c2FXMXBkRnNIYVI1cEhnPT0iLCJleHAiOm51bGwsInB1ciI6InZhcmlhdGlvbiJ9fQ==--04bce0b1f7bd43c93aab3733d0d8922ee08d72c9/fall_leaves.png" for ::1 at 2022-12-20 12:55:52 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 12:55:52 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Processing by ActiveStorage::Representations::RedirectController#show as PNG
  Parameters: {"signed_blob_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3", "variation_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vdHVyYm9jaGF0dGVyL1VzZXIvMQ)
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[36m  Disk Storage (2.6ms) [0m[34mGenerated URL for file at key: vzg2i8x6t13jvyn1u1dcdf24pz1j (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbnBuTW1rNGVEWjBNVE5xZG5sdU1YVXhaR05rWmpJMGNIb3hhZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzowMDo1Mi45NTJaIiwicHVyIjoiYmxvYl9rZXkifX0=--b26686c7b3022d6d642f21872734567ba717fd2f/fall_leaves.png)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbnBuTW1rNGVEWjBNVE5xZG5sdU1YVXhaR05rWmpJMGNIb3hhZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzowMDo1Mi45NTJaIiwicHVyIjoiYmxvYl9rZXkifX0=--b26686c7b3022d6d642f21872734567ba717fd2f/fall_leaves.png
Completed 302 Found in 18ms (ActiveRecord: 1.7ms | Allocations: 7737)


Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbnBuTW1rNGVEWjBNVE5xZG5sdU1YVXhaR05rWmpJMGNIb3hhZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzowMDo1Mi45NTJaIiwicHVyIjoiYmxvYl9rZXkifX0=--b26686c7b3022d6d642f21872734567ba717fd2f/fall_leaves.png" for ::1 at 2022-12-20 12:55:52 +0000
Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 354)


Started GET "/rooms" for ::1 at 2022-12-20 12:55:54 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "status" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2022-12-20 12:55:54.435375"], ["status", 2], ["id", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 85)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.8ms | Allocations: 124)
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: eeeel76nztyuzktwbzbfhvf8oueg[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "uq03gxunz4d6bdzr3fqnf2gosaij"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 5272], ["checksum", "aKAomI0Zw9SbipED8VjQoA=="], ["created_at", "2022-12-20 12:55:54.545759"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 2], ["blob_id", 6], ["created_at", "2022-12-20 12:55:54.547349"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: uq03gxunz4d6bdzr3fqnf2gosaij (checksum: aKAomI0Zw9SbipED8VjQoA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 149c4f16-1663-4b21-bc42-1a7b75c044f9) to Async(default) with arguments: #<GlobalID:0x000000010c91cac8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/6>>
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 65)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = $1 LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "hstore", "is_private", "created_at", "updated_at", "last_message_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "private_1_2"], ["hstore", nil], ["is_private", true], ["created_at", "2022-12-20 12:55:54.560660"], ["updated_at", "2022-12-20 12:55:54.560660"], ["last_message_at", nil]]
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mParticipant Create (1.8ms)[0m  [1m[32mINSERT INTO "participants" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["room_id", 4], ["created_at", "2022-12-20 12:55:54.575425"], ["updated_at", "2022-12-20 12:55:54.575425"]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mParticipant Create (0.8ms)[0m  [1m[32mINSERT INTO "participants" ("user_id", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["room_id", 4], ["created_at", "2022-12-20 12:55:54.583253"], ["updated_at", "2022-12-20 12:55:54.583253"]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (1.8ms) [0m[34mDownloaded file from key: 0zpiowwo5nmmf5ozj7d4ss8myd7d[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [149c4f16-1663-4b21-bc42-1a7b75c044f9]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [149c4f16-1663-4b21-bc42-1a7b75c044f9] Performing ActiveStorage::AnalyzeJob (Job ID: 149c4f16-1663-4b21-bc42-1a7b75c044f9) from Async(default) enqueued at 2022-12-20T12:55:54Z with arguments: #<GlobalID:0x000000010c551380 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [149c4f16-1663-4b21-bc42-1a7b75c044f9] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: uq03gxunz4d6bdzr3fqnf2gosaij[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [149c4f16-1663-4b21-bc42-1a7b75c044f9]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [149c4f16-1663-4b21-bc42-1a7b75c044f9]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":50,\"height\":50,\"analyzed\":true}"], ["id", 6]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [149c4f16-1663-4b21-bc42-1a7b75c044f9]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [149c4f16-1663-4b21-bc42-1a7b75c044f9] Performed ActiveStorage::AnalyzeJob (Job ID: 149c4f16-1663-4b21-bc42-1a7b75c044f9) from Async(default) in 37.43ms
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "ngsvqjfi3hijweyuv1ccvbekrc7g"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 4979], ["checksum", "IrsyuRZoxYOlDudLDVJNFg=="], ["created_at", "2022-12-20 12:55:54.681245"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 3], ["blob_id", 7], ["created_at", "2022-12-20 12:55:54.683091"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (1.3ms) [0m[32mUploaded file to key: ngsvqjfi3hijweyuv1ccvbekrc7g (checksum: IrsyuRZoxYOlDudLDVJNFg==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b3711a2d-af92-45c5-ae23-c7625090450f) to Async(default) with arguments: #<GlobalID:0x000000010c90c330 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/7>>
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.5ms | Allocations: 210)
  Rendered users/_user.html.erb (Duration: 101.3ms | Allocations: 21217)
  Rendered users/_users.html.erb (Duration: 137.6ms | Allocations: 46229)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.6ms | Allocations: 922)
  Rendered rooms/_search_results.html.erb (Duration: 0.5ms | Allocations: 221)
  Rendered rooms/_search_form.html.erb (Duration: 2.8ms | Allocations: 1545)
  [1m[36mRoom Load (0.6ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 9.8ms | Allocations: 6365)
  Rendered rooms/_room.html.erb (Duration: 11.5ms | Allocations: 6991)
  Rendered rooms/_rooms.html.erb (Duration: 16.4ms | Allocations: 9129)
  Rendered rooms/index.html.erb within layouts/application (Duration: 260.1ms | Allocations: 73067)
  Rendered layout layouts/application.html.erb (Duration: 260.3ms | Allocations: 73155)
Completed 500 Internal Server Error in 284ms (ActiveRecord: 20.6ms | Allocations: 88617)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
[ActiveJob] [ActiveStorage::AnalyzeJob] [b3711a2d-af92-45c5-ae23-c7625090450f]   [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b3711a2d-af92-45c5-ae23-c7625090450f] Performing ActiveStorage::AnalyzeJob (Job ID: b3711a2d-af92-45c5-ae23-c7625090450f) from Async(default) enqueued at 2022-12-20T12:55:54Z with arguments: #<GlobalID:0x000000010be6a300 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [b3711a2d-af92-45c5-ae23-c7625090450f] [36m  Disk Storage (0.4ms) [0m[34mDownloaded file from key: ngsvqjfi3hijweyuv1ccvbekrc7g[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b3711a2d-af92-45c5-ae23-c7625090450f]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b3711a2d-af92-45c5-ae23-c7625090450f]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":50,\"height\":50,\"analyzed\":true}"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b3711a2d-af92-45c5-ae23-c7625090450f]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b3711a2d-af92-45c5-ae23-c7625090450f] Performed ActiveStorage::AnalyzeJob (Job ID: b3711a2d-af92-45c5-ae23-c7625090450f) from Async(default) in 13.08ms
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
Started GET "/rooms" for ::1 at 2022-12-20 12:59:19 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.3ms | Allocations: 108)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 12)
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 68)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered users/_user.html.erb (Duration: 5.1ms | Allocations: 3376)
  Rendered users/_users.html.erb (Duration: 16.4ms | Allocations: 9639)
  Rendered layouts/_new_room_form.html.erb (Duration: 0.8ms | Allocations: 660)
  Rendered rooms/_search_results.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered rooms/_search_form.html.erb (Duration: 0.6ms | Allocations: 860)
  [1m[36mRoom Load (1.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 9.6ms | Allocations: 5037)
  Rendered rooms/_room.html.erb (Duration: 10.1ms | Allocations: 5248)
  Rendered rooms/_rooms.html.erb (Duration: 14.0ms | Allocations: 6841)
  Rendered rooms/index.html.erb within layouts/application (Duration: 61.4ms | Allocations: 33171)
  Rendered layout layouts/application.html.erb (Duration: 61.5ms | Allocations: 33256)
Completed 500 Internal Server Error in 119ms (ActiveRecord: 34.3ms | Allocations: 58442)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
  [1m[36mUser Update All (2.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
Started GET "/" for ::1 at 2022-12-20 13:00:41 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PagesController#home as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != $1[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = $1) ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["is_private", false], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 5.9ms | Allocations: 2532)
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (11.7ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 79.4ms | Allocations: 26711)
  Rendered shared/_links.html.erb (Duration: 0.4ms | Allocations: 111)
  Rendered layouts/_navbar.html.erb (Duration: 81.5ms | Allocations: 27369)
  Rendered layout layouts/application.html.erb (Duration: 187.1ms | Allocations: 95559)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  Rendered users/_status.html.erb (Duration: 1.0ms | Allocations: 258)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Completed 200 OK in 245ms (Views: 168.5ms | ActiveRecord: 31.2ms | Allocations: 120274)


Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbnBuTW1rNGVEWjBNVE5xZG5sdU1YVXhaR05rWmpJMGNIb3hhZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzowMDo1Mi45NTJaIiwicHVyIjoiYmxvYl9rZXkifX0=--b26686c7b3022d6d642f21872734567ba717fd2f/fall_leaves.png" for ::1 at 2022-12-20 13:00:41 +0000
Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Completed 304 Not Modified in 4ms (ActiveRecord: 0.0ms | Allocations: 564)


Started GET "/cable" for ::1 at 2022-12-20 13:00:41 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 13:00:41 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vdHVyYm9jaGF0dGVyL1VzZXIvMQ)
AppearanceChannel is transmitting the subscription confirmation
AppearanceChannel is streaming from appearance_channel
Started GET "/cable" for ::1 at 2022-12-20 13:00:41 +0000
AppearanceChannel#offline
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 13:00:41 +0000
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 85)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vdHVyYm9jaGF0dGVyL1VzZXIvMQ)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
AppearanceChannel#offline
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 59)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Started GET "/users/edit" for ::1 at 2022-12-20 13:00:42 +0000
Processing by Users::RegistrationsController#edit as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering devise/registrations/edit.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.7ms | Allocations: 235)
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/views/devise/registrations/edit.html.erb:6
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "G0Vst4geCVOXNaQRJ+bGaGFNhTs="], ["LIMIT", 1]]
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
[36m  Disk Storage (1.2ms) [0m[34mDownloaded file from key: eeeel76nztyuzktwbzbfhvf8oueg[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
  [1m[36mActiveStorage::VariantRecord Create (1.1ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES ($1, $2) RETURNING "id"[0m  [["blob_id", 3], ["variation_digest", "G0Vst4geCVOXNaQRJ+bGaGFNhTs="]]
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
  [1m[36mActiveStorage::Blob Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "jgh7adbhciqyby9ed1d6xmy1htoh"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 35947], ["checksum", "fP0mBOQ4nDRZZ1aBFXP3VA=="], ["created_at", "2022-12-20 13:00:43.358376"]]
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 4], ["blob_id", 8], ["created_at", "2022-12-20 13:00:43.360609"]]
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:26:in `avatar_thumbnail'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: jgh7adbhciqyby9ed1d6xmy1htoh (checksum: fP0mBOQ4nDRZZ1aBFXP3VA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 460691f9-5fe5-4ac8-bad2-b7b3821791d3) to Async(default) with arguments: #<GlobalID:0x000000010704c970 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/8>>
  Rendered devise/registrations/edit.html.erb within layouts/application (Duration: 425.4ms | Allocations: 42000)
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 1.8ms | Allocations: 1326)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered layouts/_navbar.html.erb (Duration: 2.3ms | Allocations: 1543)
  Rendered layout layouts/application.html.erb (Duration: 433.7ms | Allocations: 47002)
Completed 200 OK in 441ms (Views: 432.1ms | ActiveRecord: 4.8ms | Allocations: 49921)


[ActiveJob] [ActiveStorage::AnalyzeJob] [460691f9-5fe5-4ac8-bad2-b7b3821791d3]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [460691f9-5fe5-4ac8-bad2-b7b3821791d3] Performing ActiveStorage::AnalyzeJob (Job ID: 460691f9-5fe5-4ac8-bad2-b7b3821791d3) from Async(default) enqueued at 2022-12-20T13:00:43Z with arguments: #<GlobalID:0x0000000106ef3f88 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/8>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [460691f9-5fe5-4ac8-bad2-b7b3821791d3] [36m  Disk Storage (0.4ms) [0m[34mDownloaded file from key: jgh7adbhciqyby9ed1d6xmy1htoh[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [460691f9-5fe5-4ac8-bad2-b7b3821791d3]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [460691f9-5fe5-4ac8-bad2-b7b3821791d3]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"width\":150,\"height\":150,\"analyzed\":true}"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [460691f9-5fe5-4ac8-bad2-b7b3821791d3]   [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [460691f9-5fe5-4ac8-bad2-b7b3821791d3] Performed ActiveStorage::AnalyzeJob (Job ID: 460691f9-5fe5-4ac8-bad2-b7b3821791d3) from Async(default) in 16.65ms
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
AppearanceChannel#offline
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Started GET "/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJY0c1bkJqb0dSVlE2RkhKbGMybDZaVjkwYjE5c2FXMXBkRnNIYVFHV2FRR1ciLCJleHAiOm51bGwsInB1ciI6InZhcmlhdGlvbiJ9fQ==--b0da39aaac368baba67e2b22e64752b40b048212/fall_leaves.png" for ::1 at 2022-12-20 13:00:43 +0000
Processing by ActiveStorage::Representations::RedirectController#show as PNG
  Parameters: {"signed_blob_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3", "variation_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "G0Vst4geCVOXNaQRJ+bGaGFNhTs="], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
[36m  Disk Storage (0.9ms) [0m[34mGenerated URL for file at key: jgh7adbhciqyby9ed1d6xmy1htoh (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhhbWRvTjJGa1ltaGphWEY1WW5rNVpXUXhaRFo0YlhreGFIUnZhQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzowNTo0My40OTNaIiwicHVyIjoiYmxvYl9rZXkifX0=--ec42dc63211aa1f075bd28054db5e7800fe899b1/fall_leaves.png)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhhbWRvTjJGa1ltaGphWEY1WW5rNVpXUXhaRFo0YlhreGFIUnZhQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzowNTo0My40OTNaIiwicHVyIjoiYmxvYl9rZXkifX0=--ec42dc63211aa1f075bd28054db5e7800fe899b1/fall_leaves.png
Completed 302 Found in 8ms (ActiveRecord: 0.7ms | Allocations: 5863)


Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhhbWRvTjJGa1ltaGphWEY1WW5rNVpXUXhaRFo0YlhreGFIUnZhQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzowNTo0My40OTNaIiwicHVyIjoiYmxvYl9rZXkifX0=--ec42dc63211aa1f075bd28054db5e7800fe899b1/fall_leaves.png" for ::1 at 2022-12-20 13:00:43 +0000
Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 218)


AppearanceChannel#offline
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 82)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Started GET "/" for ::1 at 2022-12-20 13:00:44 +0000
Turbo::StreamsChannel is transmitting the subscription confirmation
Processing by PagesController#home as HTML
Turbo::StreamsChannel is streaming from public_messages
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != $1[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (1.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = $1) ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["is_private", false], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 3.9ms | Allocations: 1118)
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 5.7ms | Allocations: 2816)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered layouts/_navbar.html.erb (Duration: 6.1ms | Allocations: 3007)
  Rendered layout layouts/application.html.erb (Duration: 13.8ms | Allocations: 7267)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Completed 200 OK in 29ms (Views: 11.4ms | ActiveRecord: 6.0ms | Allocations: 12095)


Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
AppearanceChannel#offline
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
AppearanceChannel#offline
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Started GET "/rooms" for ::1 at 2022-12-20 13:00:45 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "status" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2022-12-20 13:00:45.248015"], ["status", 2], ["id", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.3ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.6ms | Allocations: 124)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 65)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.5ms | Allocations: 197)
  Rendered users/_user.html.erb (Duration: 6.4ms | Allocations: 4007)
  Rendered users/_users.html.erb (Duration: 17.5ms | Allocations: 8684)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.4ms | Allocations: 881)
  Rendered rooms/_search_results.html.erb (Duration: 0.6ms | Allocations: 185)
  Rendered rooms/_search_form.html.erb (Duration: 4.0ms | Allocations: 1459)
  [1m[36mRoom Load (0.6ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 14.4ms | Allocations: 6596)
  Rendered rooms/_room.html.erb (Duration: 15.7ms | Allocations: 7209)
  Rendered rooms/_rooms.html.erb (Duration: 19.6ms | Allocations: 9215)
  Rendered rooms/index.html.erb within layouts/application (Duration: 52.4ms | Allocations: 24850)
  Rendered layout layouts/application.html.erb (Duration: 52.5ms | Allocations: 24935)
Completed 500 Internal Server Error in 81ms (ActiveRecord: 12.0ms | Allocations: 40482)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
AppearanceChannel#offline
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 79)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
AppearanceChannel#offline
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Started GET "/rooms" for ::1 at 2022-12-20 13:00:52 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 108)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Completed 500 Internal Server Error in 53ms (ActiveRecord: 13.1ms | Allocations: 26716)


  
NameError (undefined local variable or method `search_rooms' for #<RoomsController:0x00000000016968>

    @rooms = search_rooms
             ^^^^^^^^^^^^
Did you mean?  search_rooms_url):
  
app/controllers/rooms_controller.rb:9:in `index'
Started GET "/rooms" for ::1 at 2022-12-20 13:01:30 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 108)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.1ms | Allocations: 12)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 68)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered users/_user.html.erb (Duration: 4.9ms | Allocations: 3376)
  Rendered users/_users.html.erb (Duration: 16.4ms | Allocations: 9618)
  Rendered layouts/_new_room_form.html.erb (Duration: 0.7ms | Allocations: 660)
  Rendered rooms/_search_results.html.erb (Duration: 1.5ms | Allocations: 1916)
  Rendered rooms/_search_form.html.erb (Duration: 2.4ms | Allocations: 2782)
  Rendered rooms/index.html.erb within layouts/application (Duration: 45.7ms | Allocations: 28170)
  Rendered layout layouts/application.html.erb (Duration: 45.8ms | Allocations: 28255)
Completed 500 Internal Server Error in 94ms (ActiveRecord: 16.0ms | Allocations: 53297)


  
ActionView::Template::Error (undefined method `each' for nil:NilClass

            @virtual_path = "rooms/_search_results";rooms = local_assigns[:rooms]; rooms = rooms;; rooms.each do |room| 
                                                                                                        ^^^^^):
    1: <% rooms.each do |room| %>
    2:   <li class="list-group-item d-flex align-items-center justify-content-between room_list_item">
    3:     <%= link_to room.name, room_path(id: room.id, name_search: params[:name_search]), data: { turbo: "false" } %>
    4:     <%= render 'rooms/joinable_link', room: room %>
  
app/views/rooms/_search_results.html.erb:1
app/views/rooms/_search_form.html.erb:12
app/views/rooms/index.html.erb:32
app/controllers/rooms_controller.rb:13:in `index'
Started GET "/rooms" for ::1 at 2022-12-20 13:02:06 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 9)
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered users/_user.html.erb (Duration: 6.0ms | Allocations: 3216)
  Rendered users/_users.html.erb (Duration: 11.2ms | Allocations: 6119)
  Rendered layouts/_new_room_form.html.erb (Duration: 0.8ms | Allocations: 528)
  Rendered rooms/_search_results.html.erb (Duration: 1.2ms | Allocations: 1861)
  Rendered rooms/_search_form.html.erb (Duration: 2.0ms | Allocations: 2838)
  Rendered rooms/index.html.erb within layouts/application (Duration: 20.3ms | Allocations: 12619)
  Rendered layout layouts/application.html.erb (Duration: 20.5ms | Allocations: 12698)
Completed 500 Internal Server Error in 35ms (ActiveRecord: 2.7ms | Allocations: 19312)


  
ActionView::Template::Error (undefined method `each' for nil:NilClass

            @virtual_path = "rooms/_search_results";rooms = local_assigns[:rooms]; rooms = rooms;; rooms.each do |room| 
                                                                                                        ^^^^^):
    1: <% rooms.each do |room| %>
    2:   <li class="list-group-item d-flex align-items-center justify-content-between room_list_item">
    3:     <%= link_to room.name, room_path(id: room.id, name_search: params[:name_search]), data: { turbo: "false" } %>
    4:     <%= render 'rooms/joinable_link', room: room %>
  
app/views/rooms/_search_results.html.erb:1
app/views/rooms/_search_form.html.erb:12
app/views/rooms/index.html.erb:32
app/controllers/rooms_controller.rb:13:in `index'
Started GET "/rooms" for ::1 at 2022-12-20 13:02:11 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 107)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Completed 500 Internal Server Error in 56ms (ActiveRecord: 11.1ms | Allocations: 26609)


  
NameError (undefined local variable or method `search_rooms' for #<RoomsController:0x00000000023078>

    @rooms = search_rooms
             ^^^^^^^^^^^^
Did you mean?  search_rooms_url):
  
app/controllers/rooms_controller.rb:9:in `index'
Started GET "/rooms" for ::1 at 2022-12-20 13:02:23 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 107)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 12)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 68)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != $1[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = $1 ORDER BY "rooms"."id" ASC LIMIT $2[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1 AND "active_storage_variant_records"."variation_digest" = $2 LIMIT $3[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered users/_user.html.erb (Duration: 5.4ms | Allocations: 3375)
  Rendered users/_users.html.erb (Duration: 17.2ms | Allocations: 9616)
  Rendered layouts/_new_room_form.html.erb (Duration: 0.9ms | Allocations: 660)
  Rendered rooms/_search_results.html.erb (Duration: 0.1ms | Allocations: 9)
  Rendered rooms/_search_form.html.erb (Duration: 1.0ms | Allocations: 860)
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = $1 ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = $1 ORDER BY "messages"."created_at" DESC LIMIT $2[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room":{"_aj_globalid":"gid://turbochatter/Room/1"},"_aj_symbol_keys":["room"]}') AND "notifications"."type" = $1 AND "notifications"."recipient_type" = $2 AND "notifications"."recipient_id" = $3 AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 7.7ms | Allocations: 5010)
  Rendered rooms/_room.html.erb (Duration: 8.1ms | Allocations: 5221)
  Rendered rooms/_rooms.html.erb (Duration: 11.2ms | Allocations: 6814)
  Rendered rooms/index.html.erb within layouts/application (Duration: 57.8ms | Allocations: 33102)
  Rendered layout layouts/application.html.erb (Duration: 57.9ms | Allocations: 33187)
Completed 500 Internal Server Error in 104ms (ActiveRecord: 19.3ms | Allocations: 58164)


  
ActionView::Template::Error (PG::UndefinedFunction: ERROR:  operator does not exist: json @> unknown
LINE 1: ...ELECT COUNT(*) FROM "notifications" WHERE (params @> '{"room...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
):
    1: <% unread = room.notifications_as_room.where(type: MessageNotification.name, recipient: current_user).unread %>
    2: 
    3: <% if unread.count > 0 %>
    4:   <%= "+#{unread.count}" %>
    5: <% end %>
  
app/views/rooms/_notifications.html.erb:3
app/views/rooms/_room.html.erb:14
app/views/rooms/_rooms.html.erb:2
app/views/rooms/_rooms.html.erb:1
app/views/rooms/index.html.erb:34
app/controllers/rooms_controller.rb:13:in `index'
Started GET "/" for ::1 at 2022-12-20 13:04:30 +0000
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

You have 12 pending migrations:

20221129184433_devise_create_users.rb
20221129184940_create_rooms.rb
20221130062651_create_messages.rb
20221130072543_create_participants.rb
20221130080807_create_active_storage_tables.active_storage.rb
20221130142248_add_status_to_users.rb
20221203121625_create_joinables.rb
20221203121727_add_role_to_user.rb
20221203121816_add_current_room_to_user.rb
20221204125908_add_last_message_at_to_rooms.rb
20221208105345_create_notifications.rb
20221210084944_add_username_to_users.rb


):
  
activerecord (7.0.4) lib/active_record/migration.rb:627:in `check_pending!'
activerecord (7.0.4) lib/active_record/migration.rb:592:in `block (2 levels) in call'
activesupport (7.0.4) lib/active_support/file_update_checker.rb:83:in `execute'
activerecord (7.0.4) lib/active_record/migration.rb:597:in `block in call'
activerecord (7.0.4) lib/active_record/migration.rb:589:in `synchronize'
activerecord (7.0.4) lib/active_record/migration.rb:589:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/rails/actions" for ::1 at 2022-12-20 13:04:32 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20221129184433)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime(6), "remember_created_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221129184433"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateRooms (20221129184940)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "hstore" varchar, "is_private" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221129184940"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateMessages (20221130062651)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "messages" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "room_id" integer NOT NULL, "body" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_a8db0fb63a"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_messages_on_room_id" ON "messages" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221130062651"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateParticipants (20221130072543)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "participants" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "room_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_b9a3c50f15"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_08123987c8"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_participants_on_user_id" ON "participants" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_participants_on_room_id" ON "participants" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221130072543"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateActiveStorageTables (20221130080807)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221130080807"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddStatusToUsers (20221130142248)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "status" integer DEFAULT 0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221130142248"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateJoinables (20221203121625)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "joinables" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "room_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_6e417600dd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_e8c38b2805"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_user_id" ON "joinables" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_room_id" ON "joinables" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221203121625"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddRoleToUser (20221203121727)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221203121727"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddCurrentRoomToUser (20221203121816)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "current_room" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221203121816"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddLastMessageAtToRooms (20221204125908)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "rooms" ADD "last_message_at" datetime(6)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221204125908"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateNotifications (20221208105345)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "recipient_type" varchar NOT NULL, "recipient_id" integer NOT NULL, "type" varchar NOT NULL, "params" json, "read_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_recipient" ON "notifications" ("recipient_type", "recipient_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_read_at" ON "notifications" ("read_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221208105345"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddUsernameToUsers (20221210084944)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "username" varchar[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221210084944"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-12-20 13:04:32.863643"], ["updated_at", "2022-12-20 13:04:32.863643"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2022-12-20 13:04:32 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PagesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != ?[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = ?) ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["is_private", 0], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 5.5ms | Allocations: 1911)
  Rendered shared/_links.html.erb (Duration: 0.9ms | Allocations: 91)
  Rendered layouts/_navbar.html.erb (Duration: 2.4ms | Allocations: 477)
  Rendered layout layouts/application.html.erb (Duration: 92.4ms | Allocations: 68099)
Completed 200 OK in 117ms (Views: 93.6ms | ActiveRecord: 1.7ms | Allocations: 79565)


Started GET "/cable" for ::1 at 2022-12-20 13:04:43 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 13:04:43 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 13:04:43 +0000
Started GET "/cable" for ::1 at 2022-12-20 13:04:43 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 13:04:43 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 13:04:43 +0000
Started GET "/users/sign_in" for ::1 at 2022-12-20 13:04:45 +0000
Processing by Users::SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.1ms | Allocations: 666)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 12.5ms | Allocations: 4629)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered layouts/_navbar.html.erb (Duration: 0.2ms | Allocations: 139)
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 8044)
Completed 200 OK in 27ms (Views: 18.8ms | ActiveRecord: 0.0ms | Allocations: 15430)


Started POST "/users/sign_in" for ::1 at 2022-12-20 13:04:48 +0000
Processing by Users::SessionsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"email"=>"55577@pm.me", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.2ms | Allocations: 1622)


Started GET "/users/sign_in" for ::1 at 2022-12-20 13:04:49 +0000
Processing by Users::SessionsController#new as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.2ms | Allocations: 133)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 1303)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered layouts/_navbar.html.erb (Duration: 0.2ms | Allocations: 137)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | Allocations: 4615)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms | Allocations: 5570)


  [1m[36mUser Update All (0.1ms)[0m  [1m[33mUPDATE "users" SET "status" = ?[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) LIMIT ?[0m  [["username", "HIPPO"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "55577@pm.me"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 13:04:55.508158"], ["updated_at", "2022-12-20 13:04:55.508158"], ["status", 0], ["role", 1], ["current_room", nil], ["username", "HIPPO"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "knnsrgjfql43uev4o3ldhsc8j7dk"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 13:04:55.558511"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 1], ["created_at", "2022-12-20 13:04:55.560658"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:04:55.561955"], ["id", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (3.0ms) [0m[32mUploaded file to key: knnsrgjfql43uev4o3ldhsc8j7dk (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 1.7ms | Allocations: 476)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c01a34ed-fda5-448d-aac0-a8f50151b8bd) to Async(default) with arguments: #<GlobalID:0x000000010e0a63b0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "55577@protonmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) LIMIT ?[0m  [["username", "KOALA"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "55577@protonmail.com"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 13:04:55.846411"], ["updated_at", "2022-12-20 13:04:55.846411"], ["status", 0], ["role", 0], ["current_room", nil], ["username", "KOALA"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "ia3q2eqcbry4je73t7xrpkc0494y"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 13:04:55.858107"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 2], ["created_at", "2022-12-20 13:04:55.859478"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:04:55.860545"], ["id", 2]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (2.7ms) [0m[32mUploaded file to key: ia3q2eqcbry4je73t7xrpkc0494y (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 57696a37-c0bc-4404-bdd8-353cdbcdfcb6) to Async(default) with arguments: #<GlobalID:0x000000010e285c80 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = ? LIMIT ?[0m  [["name", "General"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "hstore", "is_private", "created_at", "updated_at", "last_message_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "General"], ["hstore", nil], ["is_private", 0], ["created_at", "2022-12-20 13:04:55.880401"], ["updated_at", "2022-12-20 13:04:55.880401"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["room_id", 1], ["created_at", "2022-12-20 13:04:55.888751"], ["updated_at", "2022-12-20 13:04:55.888751"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = ? LIMIT ?[0m  [["name", "Testing"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "hstore", "is_private", "created_at", "updated_at", "last_message_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Testing"], ["hstore", nil], ["is_private", 0], ["created_at", "2022-12-20 13:04:55.893290"], ["updated_at", "2022-12-20 13:04:55.893290"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mJoinable Create (0.4ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["room_id", 2], ["created_at", "2022-12-20 13:04:55.896779"], ["updated_at", "2022-12-20 13:04:55.896779"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = ? LIMIT ?[0m  [["name", "Bear Room"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "hstore", "is_private", "created_at", "updated_at", "last_message_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Bear Room"], ["hstore", nil], ["is_private", 0], ["created_at", "2022-12-20 13:04:55.902436"], ["updated_at", "2022-12-20 13:04:55.902436"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["room_id", 3], ["created_at", "2022-12-20 13:04:55.905542"], ["updated_at", "2022-12-20 13:04:55.905542"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.5ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "dtz9uiansxg1082iqx0lmz23e3od"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 453598], ["checksum", "4w/wb+nZnP5Sx2uZuEg0CA=="], ["created_at", "2022-12-20 13:04:55.919811"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 3], ["created_at", "2022-12-20 13:04:55.921209"]]
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:04:55.922164"], ["id", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
[36m  Disk Storage (2.0ms) [0m[32mUploaded file to key: dtz9uiansxg1082iqx0lmz23e3od (checksum: 4w/wb+nZnP5Sx2uZuEg0CA==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 512fc3e1-74ea-4d39-abba-151b0147a2bc) to Async(default) with arguments: #<GlobalID:0x000000010e9e8bf8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 2f35ed9f-934f-415a-8276-41471b6584ed) to Async(default) with arguments: #<GlobalID:0x000000010e9f2838 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/3>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 2]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "eb1of3mt9vea448ecsywq0s6b44a"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 952225], ["checksum", "cyO7UHpW/z9ezbMliIiDqQ=="], ["created_at", "2022-12-20 13:04:55.942967"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 4], ["created_at", "2022-12-20 13:04:55.944222"]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:04:55.945168"], ["id", 2]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
[36m  Disk Storage (3.3ms) [0m[32mUploaded file to key: eb1of3mt9vea448ecsywq0s6b44a (checksum: cyO7UHpW/z9ezbMliIiDqQ==)[0m
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 661e1f3b-92ae-44ae-b5e3-1f6c8d34510b) to Async(default) with arguments: #<GlobalID:0x000000010eae34b8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7dd0f2f7-adcc-4a6f-9bdd-8cb5a528cce0) to Async(default) with arguments: #<GlobalID:0x000000010eae1280 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/4>>
  [1m[36mUser Update All (0.1ms)[0m  [1m[33mUPDATE "users" SET "status" = ?[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
Started GET "/users/sign_in" for ::1 at 2022-12-20 13:05:01 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Users::SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.5ms | Allocations: 679)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 9.0ms | Allocations: 4983)
  Rendered shared/_links.html.erb (Duration: 0.3ms | Allocations: 88)
  Rendered layouts/_navbar.html.erb (Duration: 1.1ms | Allocations: 469)
  Rendered layout layouts/application.html.erb (Duration: 89.7ms | Allocations: 71143)
Completed 200 OK in 110ms (Views: 95.2ms | ActiveRecord: 0.0ms | Allocations: 81978)


Started GET "/cable" for ::1 at 2022-12-20 13:05:02 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 13:05:02 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 13:05:02 +0000
Started POST "/users/sign_in" for ::1 at 2022-12-20 13:05:08 +0000
Processing by Users::SessionsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"email"=>"55577@pm.me", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
Redirected to http://localhost:3000/
Completed 302 Found in 207ms (ActiveRecord: 0.2ms | Allocations: 5020)


Started GET "/" for ::1 at 2022-12-20 13:05:08 +0000
Processing by PagesController#home as TURBO_STREAM
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != ?[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = ?) ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["is_private", 0], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2188)
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
[36m  Disk Storage (0.6ms) [0m[34mDownloaded file from key: dtz9uiansxg1082iqx0lmz23e3od[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES (?, ?)[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "lq5jglmu8yzfh1hw314sihxziuq7"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1586], ["checksum", "H8NfB2GN+QkcliWy4K9F1A=="], ["created_at", "2022-12-20 13:05:09.122496"]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 1], ["blob_id", 5], ["created_at", "2022-12-20 13:05:09.124697"]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/user.rb:34:in `navbar_avatar'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: lq5jglmu8yzfh1hw314sihxziuq7 (checksum: H8NfB2GN+QkcliWy4K9F1A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 0b18b4e8-6353-4c45-9bb2-9d320ab0f555) to Async(default) with arguments: #<GlobalID:0x0000000109150270 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/5>>
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 445.6ms | Allocations: 61106)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 11)
  Rendered layouts/_navbar.html.erb (Duration: 446.5ms | Allocations: 61417)
  Rendered layout layouts/application.html.erb (Duration: 454.5ms | Allocations: 66919)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  Rendered users/_status.html.erb (Duration: 0.5ms | Allocations: 260)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Completed 200 OK in 475ms (Views: 452.0ms | ActiveRecord: 4.8ms | Allocations: 81865)


[ActiveJob] [ActiveStorage::AnalyzeJob] [0b18b4e8-6353-4c45-9bb2-9d320ab0f555]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0b18b4e8-6353-4c45-9bb2-9d320ab0f555] Performing ActiveStorage::AnalyzeJob (Job ID: 0b18b4e8-6353-4c45-9bb2-9d320ab0f555) from Async(default) enqueued at 2022-12-20T13:05:09Z with arguments: #<GlobalID:0x00000001090421f8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [0b18b4e8-6353-4c45-9bb2-9d320ab0f555] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: lq5jglmu8yzfh1hw314sihxziuq7[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0b18b4e8-6353-4c45-9bb2-9d320ab0f555]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0b18b4e8-6353-4c45-9bb2-9d320ab0f555]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":25,\"height\":25,\"analyzed\":true}"], ["id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0b18b4e8-6353-4c45-9bb2-9d320ab0f555]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0b18b4e8-6353-4c45-9bb2-9d320ab0f555] Performed ActiveStorage::AnalyzeJob (Job ID: 0b18b4e8-6353-4c45-9bb2-9d320ab0f555) from Async(default) in 12.52ms
Started GET "/cable" for ::1 at 2022-12-20 13:05:09 +0000
Started GET "/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJY0c1bkJqb0dSVlE2RkhKbGMybDZaVjkwYjE5c2FXMXBkRnNIYVI1cEhnPT0iLCJleHAiOm51bGwsInB1ciI6InZhcmlhdGlvbiJ9fQ==--04bce0b1f7bd43c93aab3733d0d8922ee08d72c9/fall_leaves.png" for ::1 at 2022-12-20 13:05:09 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 13:05:09 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vdHVyYm9jaGF0dGVyL1VzZXIvMQ)
Processing by ActiveStorage::Representations::RedirectController#show as PNG
  Parameters: {"signed_blob_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3", "variation_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
[36m  Disk Storage (1.6ms) [0m[34mGenerated URL for file at key: lq5jglmu8yzfh1hw314sihxziuq7 (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhiSEUxYW1kc2JYVTRlWHBtYURGb2R6TXhOSE5wYUhoNmFYVnhOd1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDowOS4yNDRaIiwicHVyIjoiYmxvYl9rZXkifX0=--7e312180c7878244a94084e104e52f134e43221d/fall_leaves.png)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhiSEUxYW1kc2JYVTRlWHBtYURGb2R6TXhOSE5wYUhoNmFYVnhOd1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDowOS4yNDRaIiwicHVyIjoiYmxvYl9rZXkifX0=--7e312180c7878244a94084e104e52f134e43221d/fall_leaves.png
Completed 302 Found in 12ms (ActiveRecord: 0.5ms | Allocations: 6459)


Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhiSEUxYW1kc2JYVTRlWHBtYURGb2R6TXhOSE5wYUhoNmFYVnhOd1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDowOS4yNDRaIiwicHVyIjoiYmxvYl9rZXkifX0=--7e312180c7878244a94084e104e52f134e43221d/fall_leaves.png" for ::1 at 2022-12-20 13:05:09 +0000
Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 354)


Started GET "/rooms" for ::1 at 2022-12-20 13:05:09 +0000
Processing by RoomsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "status" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:05:10.034135"], ["status", 2], ["id", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 85)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/rooms_controller.rb:10:in `index'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.8ms | Allocations: 124)
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: dtz9uiansxg1082iqx0lmz23e3od[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES (?, ?)[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "4yk7aglza8jku6klfvh4klpm12g8"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 5272], ["checksum", "aKAomI0Zw9SbipED8VjQoA=="], ["created_at", "2022-12-20 13:05:10.138900"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 2], ["blob_id", 6], ["created_at", "2022-12-20 13:05:10.140280"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: 4yk7aglza8jku6klfvh4klpm12g8 (checksum: aKAomI0Zw9SbipED8VjQoA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9f49c978-7d56-4137-958d-20d6afc2ebab) to Async(default) with arguments: #<GlobalID:0x0000000109239ab0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/6>>
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 65)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != ?[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = ? ORDER BY "rooms"."id" ASC LIMIT ?[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = ? LIMIT ?[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "hstore", "is_private", "created_at", "updated_at", "last_message_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "private_1_2"], ["hstore", nil], ["is_private", 1], ["created_at", "2022-12-20 13:05:10.152679"], ["updated_at", "2022-12-20 13:05:10.152679"], ["last_message_at", nil]]
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/room.rb:17:in `create_private_room'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mParticipant Create (0.4ms)[0m  [1m[32mINSERT INTO "participants" ("user_id", "room_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 2], ["room_id", 4], ["created_at", "2022-12-20 13:05:10.165102"], ["updated_at", "2022-12-20 13:05:10.165102"]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mParticipant Create (0.4ms)[0m  [1m[32mINSERT INTO "participants" ("user_id", "room_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["room_id", 4], ["created_at", "2022-12-20 13:05:10.171876"], ["updated_at", "2022-12-20 13:05:10.171876"]]
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/room.rb:19:in `block in create_private_room'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (1.6ms) [0m[34mDownloaded file from key: eb1of3mt9vea448ecsywq0s6b44a[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f49c978-7d56-4137-958d-20d6afc2ebab]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f49c978-7d56-4137-958d-20d6afc2ebab] Performing ActiveStorage::AnalyzeJob (Job ID: 9f49c978-7d56-4137-958d-20d6afc2ebab) from Async(default) enqueued at 2022-12-20T13:05:10Z with arguments: #<GlobalID:0x0000000108e83a10 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f49c978-7d56-4137-958d-20d6afc2ebab] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: 4yk7aglza8jku6klfvh4klpm12g8[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f49c978-7d56-4137-958d-20d6afc2ebab]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f49c978-7d56-4137-958d-20d6afc2ebab]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":50,\"height\":50,\"analyzed\":true}"], ["id", 6]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f49c978-7d56-4137-958d-20d6afc2ebab]   [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f49c978-7d56-4137-958d-20d6afc2ebab] Performed ActiveStorage::AnalyzeJob (Job ID: 9f49c978-7d56-4137-958d-20d6afc2ebab) from Async(default) in 14.71ms
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("blob_id", "variation_digest") VALUES (?, ?)[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "vagcw69zanm54rcn81i7z5ta6ldb"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 4979], ["checksum", "IrsyuRZoxYOlDudLDVJNFg=="], ["created_at", "2022-12-20 13:05:10.279336"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "ActiveStorage::VariantRecord"], ["record_id", 3], ["blob_id", 7], ["created_at", "2022-12-20 13:05:10.281178"]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/user.rb:30:in `chat_avatar'
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: vagcw69zanm54rcn81i7z5ta6ldb (checksum: IrsyuRZoxYOlDudLDVJNFg==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 94fef26b-cdce-4960-bff8-72d068f9c6fe) to Async(default) with arguments: #<GlobalID:0x0000000109229a48 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/7>>
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
  Rendered users/_last_message.html.erb (Duration: 0.6ms | Allocations: 216)
  Rendered users/_user.html.erb (Duration: 108.1ms | Allocations: 19669)
  Rendered users/_users.html.erb (Duration: 143.0ms | Allocations: 42952)
  Rendered layouts/_new_room_form.html.erb (Duration: 1.6ms | Allocations: 911)
  Rendered rooms/_search_results.html.erb (Duration: 10.6ms | Allocations: 485)
  Rendered rooms/_search_form.html.erb (Duration: 12.8ms | Allocations: 1756)
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ? ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (4.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (json_extract(params, '$.room') = '{"_aj_globalid":"gid://turbochatter/Room/1"}') AND "notifications"."type" = ? AND "notifications"."recipient_type" = ? AND "notifications"."recipient_id" = ? AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 8.7ms | Allocations: 4090)
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ? AND "rooms"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/user.rb:42:in `has_joined_room'
  Rendered rooms/_joinable_link.html.erb (Duration: 2.9ms | Allocations: 1301)
  Rendered rooms/_last_message.html.erb (Duration: 0.7ms | Allocations: 190)
  Rendered rooms/_room.html.erb (Duration: 16.2ms | Allocations: 6522)
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 2], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (json_extract(params, '$.room') = '{"_aj_globalid":"gid://turbochatter/Room/2"}') AND "notifications"."type" = ? AND "notifications"."recipient_type" = ? AND "notifications"."recipient_id" = ? AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 1.5ms | Allocations: 890)
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ? AND "rooms"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/user.rb:42:in `has_joined_room'
  Rendered rooms/_joinable_link.html.erb (Duration: 1.5ms | Allocations: 846)
  Rendered rooms/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered rooms/_room.html.erb (Duration: 4.1ms | Allocations: 2112)
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 3], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (json_extract(params, '$.room') = '{"_aj_globalid":"gid://turbochatter/Room/3"}') AND "notifications"."type" = ? AND "notifications"."recipient_type" = ? AND "notifications"."recipient_id" = ? AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 1.3ms | Allocations: 845)
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ? AND "rooms"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:42:in `has_joined_room'
  Rendered rooms/_joinable_link.html.erb (Duration: 1.1ms | Allocations: 840)
  Rendered rooms/_last_message.html.erb (Duration: 0.1ms | Allocations: 8)
  Rendered rooms/_room.html.erb (Duration: 3.4ms | Allocations: 2055)
  Rendered rooms/_rooms.html.erb (Duration: 38.1ms | Allocations: 14447)
  Rendered rooms/index.html.erb within layouts/application (Duration: 291.5ms | Allocations: 75023)
[ActiveJob] [ActiveStorage::AnalyzeJob] [94fef26b-cdce-4960-bff8-72d068f9c6fe]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [94fef26b-cdce-4960-bff8-72d068f9c6fe] Performing ActiveStorage::AnalyzeJob (Job ID: 94fef26b-cdce-4960-bff8-72d068f9c6fe) from Async(default) enqueued at 2022-12-20T13:05:10Z with arguments: #<GlobalID:0x0000000108ee3cf8 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [94fef26b-cdce-4960-bff8-72d068f9c6fe] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: vagcw69zanm54rcn81i7z5ta6ldb[0m
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 3.3ms | Allocations: 1392)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered layouts/_navbar.html.erb (Duration: 3.9ms | Allocations: 1588)
  Rendered layout layouts/application.html.erb (Duration: 309.9ms | Allocations: 81227)
Completed 200 OK in 336ms (Views: 296.8ms | ActiveRecord: 17.5ms | Allocations: 96565)


[ActiveJob] [ActiveStorage::AnalyzeJob] [94fef26b-cdce-4960-bff8-72d068f9c6fe]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [94fef26b-cdce-4960-bff8-72d068f9c6fe]   [1m[36mActiveStorage::Blob Update (1.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":50,\"height\":50,\"analyzed\":true}"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [94fef26b-cdce-4960-bff8-72d068f9c6fe]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [94fef26b-cdce-4960-bff8-72d068f9c6fe] Performed ActiveStorage::AnalyzeJob (Job ID: 94fef26b-cdce-4960-bff8-72d068f9c6fe) from Async(default) in 18.55ms
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from users
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from user_status
Started GET "/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJY0c1bkJqb0dSVlE2RkhKbGMybDZaVjkwYjE5c2FXMXBkRnNIYVRkcE53PT0iLCJleHAiOm51bGwsInB1ciI6InZhcmlhdGlvbiJ9fQ==--fa1cbae9d81b156b4ebeffdacfc7adf9e6558794/fall_leaves.png" for ::1 at 2022-12-20 13:05:10 +0000
Processing by ActiveStorage::Representations::RedirectController#show as PNG
Started GET "/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--7bff510986c8b032ce8be8e63ef06a3ffb3d7854/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJY0c1bkJqb0dSVlE2RkhKbGMybDZaVjkwYjE5c2FXMXBkRnNIYVRkcE53PT0iLCJleHAiOm51bGwsInB1ciI6InZhcmlhdGlvbiJ9fQ==--fa1cbae9d81b156b4ebeffdacfc7adf9e6558794/crystal.png" for ::1 at 2022-12-20 13:05:10 +0000
Turbo::StreamsChannel is transmitting the subscription confirmation
  Parameters: {"signed_blob_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--068b6e37e8fa7b29737f88d75af35f29f5bb34f3", "variation_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Turbo::StreamsChannel is streaming from rooms
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
[36m  Disk Storage (0.4ms) [0m[34mGenerated URL for file at key: 4yk7aglza8jku6klfvh4klpm12g8 (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhOSGxyTjJGbmJIcGhPR3ByZFRacmJHWjJhRFJyYkhCdE1USm5PQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDoxMC40NjBaIiwicHVyIjoiYmxvYl9rZXkifX0=--ccd1e1dc71d47c3c80bcdc077f8887dd782b6769/fall_leaves.png)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhOSGxyTjJGbmJIcGhPR3ByZFRacmJHWjJhRFJyYkhCdE1USm5PQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDoxMC40NjBaIiwicHVyIjoiYmxvYl9rZXkifX0=--ccd1e1dc71d47c3c80bcdc077f8887dd782b6769/fall_leaves.png
Completed 302 Found in 9ms (ActiveRecord: 0.5ms | Allocations: 5144)


Processing by ActiveStorage::Representations::RedirectController#show as PNG
  Parameters: {"signed_blob_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBDUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--7bff510986c8b032ce8be8e63ef06a3ffb3d7854", "variation_key"=>"[FILTERED]", "filename"=>"crystal"}
Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhOSGxyTjJGbmJIcGhPR3ByZFRacmJHWjJhRFJyYkhCdE1USm5PQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDoxMC40NjBaIiwicHVyIjoiYmxvYl9rZXkifX0=--ccd1e1dc71d47c3c80bcdc077f8887dd782b6769/fall_leaves.png" for ::1 at 2022-12-20 13:05:10 +0000
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "ActiveStorage::VariantRecord"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
[36m  Disk Storage (0.3ms) [0m[34mGenerated URL for file at key: vagcw69zanm54rcn81i7z5ta6ldb (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbUZuWTNjMk9YcGhibTAxTkhKamJqZ3hhVGQ2TlhSaE5teGtZZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUVdsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1OeWVYTjBZV3d1Y0c1bklqc2dabWxzWlc1aGJXVXFQVlZVUmkwNEp5ZGpjbmx6ZEdGc0xuQnVad1k3QmxRNkVXTnZiblJsYm5SZmRIbHdaVWtpRG1sdFlXZGxMM0J1WndZN0JsUTZFWE5sY25acFkyVmZibUZ0WlRvS2JHOWpZV3c9IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDoxMC40ODBaIiwicHVyIjoiYmxvYl9rZXkifX0=--41ef4b14dc9ee16b0c1c94bb6cb1be218b4d5915/crystal.png)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbUZuWTNjMk9YcGhibTAxTkhKamJqZ3hhVGQ2TlhSaE5teGtZZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUVdsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1OeWVYTjBZV3d1Y0c1bklqc2dabWxzWlc1aGJXVXFQVlZVUmkwNEp5ZGpjbmx6ZEdGc0xuQnVad1k3QmxRNkVXTnZiblJsYm5SZmRIbHdaVWtpRG1sdFlXZGxMM0J1WndZN0JsUTZFWE5sY25acFkyVmZibUZ0WlRvS2JHOWpZV3c9IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDoxMC40ODBaIiwicHVyIjoiYmxvYl9rZXkifX0=--41ef4b14dc9ee16b0c1c94bb6cb1be218b4d5915/crystal.png
Completed 302 Found in 9ms (ActiveRecord: 0.4ms | Allocations: 5358)


Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbUZuWTNjMk9YcGhibTAxTkhKamJqZ3hhVGQ2TlhSaE5teGtZZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUVdsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1OeWVYTjBZV3d1Y0c1bklqc2dabWxzWlc1aGJXVXFQVlZVUmkwNEp5ZGpjbmx6ZEdGc0xuQnVad1k3QmxRNkVXTnZiblJsYm5SZmRIbHdaVWtpRG1sdFlXZGxMM0J1WndZN0JsUTZFWE5sY25acFkyVmZibUZ0WlRvS2JHOWpZV3c9IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDoxMC40ODBaIiwicHVyIjoiYmxvYl9rZXkifX0=--41ef4b14dc9ee16b0c1c94bb6cb1be218b4d5915/crystal.png" for ::1 at 2022-12-20 13:05:10 +0000
Completed 200 OK in 3ms (ActiveRecord: 0.0ms | Allocations: 551)


Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"crystal"}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 194)


Started GET "/rooms/1" for ::1 at 2022-12-20 13:05:12 +0000
Processing by RoomsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:17:in `show'
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:18:in `show'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."room_id" = ?[0m  [["room_id", 1]]
  â†³ app/controllers/rooms_controller.rb:27:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ? OFFSET ?[0m  [["room_id", 1], ["LIMIT", 10], ["OFFSET", 0]]
  â†³ app/controllers/rooms_controller.rb:28:in `show'
  [1m[36mNotification Update All (0.1ms)[0m  [1m[33mUPDATE "notifications" SET "read_at" = ? WHERE (json_extract(params, '$.room') = '{"_aj_globalid":"gid://turbochatter/Room/1"}') AND "notifications"."recipient_type" = ? AND "notifications"."recipient_id" = ? AND "notifications"."read_at" IS NULL[0m  [["read_at", "2022-12-20 13:05:12.146575"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/controllers/rooms_controller.rb:73:in `set_notifications_to_read'
  Rendering layout layouts/application.html.erb
  Rendering rooms/index.html.erb within layouts/application
  Rendered shared/_message_error.html.erb (Duration: 0.0ms | Allocations: 9)
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" != ?[0m  [["id", 1]]
  â†³ app/views/users/_users.html.erb:1
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."name" = ? ORDER BY "rooms"."id" ASC LIMIT ?[0m  [["name", "private_1_2"], ["LIMIT", 1]]
  â†³ app/views/users/_users.html.erb:3
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 4], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mParticipant Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "participants" WHERE "participants"."room_id" = ? AND "participants"."user_id" = ? LIMIT ?[0m  [["room_id", 1], ["user_id", 2], ["LIMIT", 1]]
  â†³ app/models/room.rb:25:in `participant?'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 4], ["variation_digest", "ZmDfamq3DaAOqmqEnqBAWE4VJTE="], ["LIMIT", 1]]
  â†³ app/models/user.rb:30:in `chat_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 56)
  Rendered users/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered users/_user.html.erb (Duration: 6.0ms | Allocations: 4822)
  Rendered users/_users.html.erb (Duration: 10.2ms | Allocations: 7806)
  Rendered layouts/_new_room_form.html.erb (Duration: 0.8ms | Allocations: 579)
  Rendered rooms/_search_results.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered rooms/_search_form.html.erb (Duration: 0.6ms | Allocations: 853)
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ? ORDER BY last_message_at DESC[0m  [["user_id", 1]]
  â†³ app/views/rooms/_rooms.html.erb:1
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 1], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (json_extract(params, '$.room') = '{"_aj_globalid":"gid://turbochatter/Room/1"}') AND "notifications"."type" = ? AND "notifications"."recipient_type" = ? AND "notifications"."recipient_id" = ? AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 1.5ms | Allocations: 859)
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ? AND "rooms"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/user.rb:42:in `has_joined_room'
  Rendered rooms/_joinable_link.html.erb (Duration: 1.4ms | Allocations: 845)
  Rendered rooms/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered rooms/_room.html.erb (Duration: 3.5ms | Allocations: 2082)
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 2], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (json_extract(params, '$.room') = '{"_aj_globalid":"gid://turbochatter/Room/2"}') AND "notifications"."type" = ? AND "notifications"."recipient_type" = ? AND "notifications"."recipient_id" = ? AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 1.1ms | Allocations: 853)
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ? AND "rooms"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/user.rb:42:in `has_joined_room'
  Rendered rooms/_joinable_link.html.erb (Duration: 1.4ms | Allocations: 848)
  Rendered rooms/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered rooms/_room.html.erb (Duration: 3.4ms | Allocations: 2087)
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["room_id", 3], ["LIMIT", 1]]
  â†³ app/models/room.rb:29:in `latest_message'
  [1m[36mNotification Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notifications" WHERE (json_extract(params, '$.room') = '{"_aj_globalid":"gid://turbochatter/Room/3"}') AND "notifications"."type" = ? AND "notifications"."recipient_type" = ? AND "notifications"."recipient_id" = ? AND "notifications"."read_at" IS NULL[0m  [["type", "MessageNotification"], ["recipient_type", "User"], ["recipient_id", 1]]
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
  â†³ app/views/rooms/_notifications.html.erb:3
  Rendered rooms/_notifications.html.erb (Duration: 2.1ms | Allocations: 1012)
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ? AND "rooms"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:42:in `has_joined_room'
  Rendered rooms/_joinable_link.html.erb (Duration: 1.5ms | Allocations: 846)
  Rendered rooms/_last_message.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered rooms/_room.html.erb (Duration: 4.6ms | Allocations: 2233)
  Rendered rooms/_rooms.html.erb (Duration: 16.7ms | Allocations: 9693)
  Rendered messages/_pager.html.erb (Duration: 1.1ms | Allocations: 174)
  Rendered collection of templates [0 times] (Duration: 0.0ms | Allocations: 27)
  Rendered layouts/_new_message_form.html.erb (Duration: 2.3ms | Allocations: 1134)
  Rendered rooms/index.html.erb within layouts/application (Duration: 39.7ms | Allocations: 23881)
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 1.6ms | Allocations: 1267)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered layouts/_navbar.html.erb (Duration: 2.0ms | Allocations: 1471)
  Rendered layout layouts/application.html.erb (Duration: 45.0ms | Allocations: 28576)
Completed 200 OK in 66ms (Views: 43.2ms | ActiveRecord: 4.1ms | Allocations: 41239)


Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
Finished "/cable" [WebSocket] for ::1 at 2022-12-20 13:05:12 +0000
Turbo::StreamsChannel stopped streaming from users
Turbo::StreamsChannel stopped streaming from user_status
Turbo::StreamsChannel stopped streaming from rooms
Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhOSGxyTjJGbmJIcGhPR3ByZFRacmJHWjJhRFJyYkhCdE1USm5PQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDoxMC40NjBaIiwicHVyIjoiYmxvYl9rZXkifX0=--ccd1e1dc71d47c3c80bcdc077f8887dd782b6769/fall_leaves.png" for ::1 at 2022-12-20 13:05:12 +0000
Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhiSEUxYW1kc2JYVTRlWHBtYURGb2R6TXhOSE5wYUhoNmFYVnhOd1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpU1dsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1aaGJHeGZiR1ZoZG1WekxuQnVaeUk3SUdacGJHVnVZVzFsS2oxVlZFWXRPQ2NuWm1Gc2JGOXNaV0YyWlhNdWNHNW5CanNHVkRvUlkyOXVkR1Z1ZEY5MGVYQmxTU0lPYVcxaFoyVXZjRzVuQmpzR1ZEb1JjMlZ5ZG1salpWOXVZVzFsT2dwc2IyTmhiQT09IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDowOS4yNDRaIiwicHVyIjoiYmxvYl9rZXkifX0=--7e312180c7878244a94084e104e52f134e43221d/fall_leaves.png" for ::1 at 2022-12-20 13:05:12 +0000
Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Completed 304 Not Modified in 2ms (ActiveRecord: 0.0ms | Allocations: 292)


Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"fall_leaves"}
Completed 304 Not Modified in 2ms (ActiveRecord: 0.0ms | Allocations: 430)


Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbUZuWTNjMk9YcGhibTAxTkhKamJqZ3hhVGQ2TlhSaE5teGtZZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUVdsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1OeWVYTjBZV3d1Y0c1bklqc2dabWxzWlc1aGJXVXFQVlZVUmkwNEp5ZGpjbmx6ZEdGc0xuQnVad1k3QmxRNkVXTnZiblJsYm5SZmRIbHdaVWtpRG1sdFlXZGxMM0J1WndZN0JsUTZFWE5sY25acFkyVmZibUZ0WlRvS2JHOWpZV3c9IiwiZXhwIjoiMjAyMi0xMi0yMFQxMzoxMDoxMC40ODBaIiwicHVyIjoiYmxvYl9rZXkifX0=--41ef4b14dc9ee16b0c1c94bb6cb1be218b4d5915/crystal.png" for ::1 at 2022-12-20 13:05:12 +0000
Processing by ActiveStorage::DiskController#show as PNG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"crystal"}
Completed 304 Not Modified in 2ms (ActiveRecord: 0.0ms | Allocations: 204)


Started GET "/cable" for ::1 at 2022-12-20 13:05:12 +0000
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 13:05:12 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/cable" for ::1 at 2022-12-20 13:05:12 +0000
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vdHVyYm9jaGF0dGVyL1VzZXIvMQ)
Started GET "/cable" [WebSocket] for ::1 at 2022-12-20 13:05:12 +0000
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
AppearanceChannel is transmitting the subscription confirmation
AppearanceChannel is streaming from appearance_channel
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vdHVyYm9jaGF0dGVyL1VzZXIvMQ)
AppearanceChannel#online
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 85)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from rooms
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from user_status
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from users
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vdHVyYm9jaGF0dGVyL1Jvb20vMQ
AppearanceChannel#online
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 59)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
AppearanceChannel#online
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
AppearanceChannel#online
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
Started POST "/rooms/search" for ::1 at 2022-12-20 13:05:14 +0000
Processing by RoomsController#search as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "name_search"=>"ss"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mRoom Pluck (0.2ms)[0m  [1m[34mSELECT "rooms"."id" FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ?[0m  [["user_id", 1]]
  â†³ app/helpers/rooms_helper.rb:5:in `search_rooms'
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."is_private" = ? AND "rooms"."id" NOT IN (?, ?, ?) AND (name LIKE '%ss%') ORDER BY "rooms"."name" ASC[0m  [["is_private", 0], ["id", 1], ["id", 2], ["id", 3]]
  â†³ app/views/rooms/_search_results.html.erb:1
  Rendered rooms/_search_results.html.erb (Duration: 1.3ms | Allocations: 757)
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 7226)


Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
AppearanceChannel#online
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 61)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Started POST "/rooms/search" for ::1 at 2022-12-20 13:05:14 +0000
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
Processing by RoomsController#search as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "name_search"=>"ss"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/rooms_controller.rb:68:in `set_status'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mRoom Pluck (0.1ms)[0m  [1m[34mSELECT "rooms"."id" FROM "rooms" INNER JOIN "joinables" ON "rooms"."id" = "joinables"."room_id" WHERE "joinables"."user_id" = ?[0m  [["user_id", 1]]
  â†³ app/helpers/rooms_helper.rb:5:in `search_rooms'
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."is_private" = ? AND "rooms"."id" NOT IN (?, ?, ?) AND (name LIKE '%ss%') ORDER BY "rooms"."name" ASC[0m  [["is_private", 0], ["id", 1], ["id", 2], ["id", 3]]
  â†³ app/views/rooms/_search_results.html.erb:1
  Rendered rooms/_search_results.html.erb (Duration: 1.5ms | Allocations: 671)
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 6524)


Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
AppearanceChannel#online
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
AppearanceChannel#online
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
AppearanceChannel#online
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
AppearanceChannel#online
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>"
Started GET "/" for ::1 at 2022-12-20 13:05:18 +0000
Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-success\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
Processing by PagesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != ?[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = ?) ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["is_private", 0], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 1.8ms | Allocations: 1117)
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 3.7ms | Allocations: 2762)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered layouts/_navbar.html.erb (Duration: 4.0ms | Allocations: 2953)
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | Allocations: 7234)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "status" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:05:18.113294"], ["status", 0], ["id", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Completed 200 OK in 19ms (Views: 9.4ms | ActiveRecord: 2.1ms | Allocations: 12579)


Turbo::StreamsChannel transmitting "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>" (via streamed from user_status)
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InVzZXJzIg==--752a9efd48d98d6a585f4d2e14574f7dbf65a5044827a291ac0a3682de9ba621"}
Turbo::StreamsChannel stopped streaming from users
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InVzZXJfc3RhdHVzIg==--888c1b3ec80780e137d98fa46642202ce1205269bf8a442671999d9729f4c5da"}
Turbo::StreamsChannel stopped streaming from user_status
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InJvb21zIg==--20d4143ca66b2b4295a26a5f4eace6d66f1d3404db440757efab9efffa4e9095"}
Turbo::StreamsChannel stopped streaming from rooms
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"IloybGtPaTh2ZEhWeVltOWphR0YwZEdWeUwxSnZiMjB2TVEi--87a968bae44c1dfcba6a98ba8a9314afd34bf2633638f6185907903727f4516c"}
Turbo::StreamsChannel stopped streaming from Z2lkOi8vdHVyYm9jaGF0dGVyL1Jvb20vMQ
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
AppearanceChannel#offline
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "status" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["status", 0], ["updated_at", "2022-12-20 13:05:18.198882"], ["id", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
AppearanceChannel#offline
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Started GET "/admin/dashboard" for ::1 at 2022-12-20 13:05:22 +0000
Processing by AdminController#dashboard as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mMessage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", strftime('%Y-%m-%d', "messages"."created_at") AS "strftime_y_m_d_messages_created_at" FROM "messages" WHERE ("messages"."created_at" >= '2022-11-20 13:05:22.245032' AND "messages"."created_at" <= '2022-12-20 13:05:22.245599') GROUP BY strftime('%Y-%m-%d', "messages"."created_at")[0m
  â†³ app/models/message.rb:42:in `messages_this_month'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/views/admin/_users_information.html.erb:4
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" = ?[0m  [["status", 2]]
  â†³ app/views/admin/_users_information.html.erb:5
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 0]]
  â†³ app/views/admin/_users_information.html.erb:6
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 1]]
  â†³ app/views/admin/_users_information.html.erb:7
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  â†³ app/views/admin/_users_information.html.erb:8
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 3]]
  â†³ app/views/admin/_users_information.html.erb:9
  Rendered admin/_users_information.html.erb (Duration: 5.5ms | Allocations: 4027)
  [1m[36mRoom Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  â†³ app/views/admin/_rooms_information.html.erb:4
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages"[0m
  â†³ app/views/admin/_rooms_information.html.erb:5
  Rendered admin/_rooms_information.html.erb (Duration: 2.7ms | Allocations: 1307)
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 10.6ms | Allocations: 6250)
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 4.7ms | Allocations: 2857)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 9)
  Rendered layouts/_navbar.html.erb (Duration: 5.2ms | Allocations: 3097)
  Rendered layout layouts/application.html.erb (Duration: 20.5ms | Allocations: 12638)
Completed 200 OK in 28ms (Views: 20.9ms | ActiveRecord: 1.4ms | Allocations: 16455)


Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
AppearanceChannel#offline
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 60)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
AppearanceChannel#offline
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Started GET "/" for ::1 at 2022-12-20 13:05:23 +0000
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
Processing by PagesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `set_current_user'
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."status" != ?[0m  [["status", 0]]
  â†³ app/controllers/pages_controller.rb:6:in `home'
  Rendering layout layouts/application.html.erb
  Rendering pages/home.html.erb within layouts/application
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."room_id" IN (SELECT "rooms"."id" FROM "rooms" WHERE "rooms"."is_private" = ?) ORDER BY "messages"."created_at" DESC LIMIT ?[0m  [["is_private", 0], ["LIMIT", 15]]
  â†³ app/views/pages/home.html.erb:31
  Rendered pages/home.html.erb within layouts/application (Duration: 1.9ms | Allocations: 1106)
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ? AND "active_storage_variant_records"."variation_digest" = ? LIMIT ?[0m  [["blob_id", 3], ["variation_digest", "nXkOAKArdJGQ4vGBr/e7mzohrII="], ["LIMIT", 1]]
  â†³ app/models/user.rb:34:in `navbar_avatar'
  Rendered layouts/_navbar_dropdown.html.erb (Duration: 4.6ms | Allocations: 2721)
  Rendered shared/_links.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered layouts/_navbar.html.erb (Duration: 4.9ms | Allocations: 2912)
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 7071)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/pages_controller.rb:12:in `set_status'
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 58)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
Completed 200 OK in 22ms (Views: 10.8ms | ActiveRecord: 1.2ms | Allocations: 11803)


Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"InB1YmxpY19tZXNzYWdlcyI=--6856063a4b0bd5dc2dc3e6e141af0c601b16756f24482f85607421b0565edaca"}
Turbo::StreamsChannel stopped streaming from public_messages
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from public_messages
AppearanceChannel#offline
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:34:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/channels/appearance_channel.rb:36:in `broadcast_new_status'
  Rendered users/_status.html.erb (Duration: 0.4ms | Allocations: 59)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "status" = ?[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20221129184433)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime(6), "remember_created_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221129184433"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateRooms (20221129184940)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "is_private" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221129184940"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateMessages (20221130062651)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "messages" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "room_id" integer NOT NULL, "body" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_a8db0fb63a"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_messages_on_room_id" ON "messages" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221130062651"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateParticipants (20221130072543)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "participants" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "room_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_b9a3c50f15"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_08123987c8"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_participants_on_user_id" ON "participants" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_participants_on_room_id" ON "participants" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221130072543"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateActiveStorageTables (20221130080807)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221130080807"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddStatusToUsers (20221130142248)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "status" integer DEFAULT 0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221130142248"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateJoinables (20221203121625)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "joinables" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "room_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_6e417600dd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_e8c38b2805"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_user_id" ON "joinables" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_room_id" ON "joinables" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221203121625"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddRoleToUser (20221203121727)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221203121727"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddCurrentRoomToUser (20221203121816)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "current_room" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221203121816"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddLastMessageAtToRooms (20221204125908)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "rooms" ADD "last_message_at" datetime(6)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221204125908"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateNotifications (20221208105345)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "recipient_type" varchar NOT NULL, "recipient_id" integer NOT NULL, "type" varchar NOT NULL, "params" json, "read_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_recipient" ON "notifications" ("recipient_type", "recipient_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_read_at" ON "notifications" ("read_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221208105345"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddUsernameToUsers (20221210084944)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "username" varchar[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221210084944"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-12-20 13:06:00.064826"], ["updated_at", "2022-12-20 13:06:00.064826"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Update All (0.2ms)[0m  [1m[33mUPDATE "users" SET "status" = ?[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "55577@pm.me"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) LIMIT ?[0m  [["username", "HIPPO"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "55577@pm.me"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 13:06:02.563687"], ["updated_at", "2022-12-20 13:06:02.563687"], ["status", 0], ["role", 1], ["current_room", nil], ["username", "HIPPO"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "hcri7284g8aq5y3gwsd56yrdsf3s"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 13:06:02.603591"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 1], ["created_at", "2022-12-20 13:06:02.605356"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:06:02.606553"], ["id", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (3.3ms) [0m[32mUploaded file to key: hcri7284g8aq5y3gwsd56yrdsf3s (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 0.8ms | Allocations: 476)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d0e10317-378d-4456-9e24-46cf1c0c05a0) to Async(default) with arguments: #<GlobalID:0x0000000112a87ba0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "55577@protonmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) LIMIT ?[0m  [["username", "KOALA"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "status", "role", "current_room", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "55577@protonmail.com"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2022-12-20 13:06:02.887215"], ["updated_at", "2022-12-20 13:06:02.887215"], ["status", 0], ["role", 0], ["current_room", nil], ["username", "KOALA"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:63:in `add_default_avatar'
DEPRECATION WARNING: image/jpg is not a valid content type, it should not be used when creating a blob, and support for it will be removed in Rails 7.1. If you want to keep supporting this content type past Rails 7.1, add it to `config.active_storage.variable_content_types`. Dismiss this warning by setting `config.active_storage.silence_invalid_content_types_warning = true`. (called from add_default_avatar at /Users/vitalyamos/RubymineProjects/turbochatter/app/models/user.rb:65)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "8kgtnlz8bx4tyc7hpr66kr8bp8n6"], ["filename", "galaxy.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 871443], ["checksum", "krwBHsxnLYY7TU/T8AaPEg=="], ["created_at", "2022-12-20 13:06:02.897095"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 2], ["created_at", "2022-12-20 13:06:02.898548"]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:06:02.899578"], ["id", 2]]
  â†³ app/models/user.rb:65:in `add_default_avatar'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/user.rb:65:in `add_default_avatar'
[36m  Disk Storage (2.5ms) [0m[32mUploaded file to key: 8kgtnlz8bx4tyc7hpr66kr8bp8n6 (checksum: krwBHsxnLYY7TU/T8AaPEg==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 77e35cdc-cc97-4f36-8057-50b60a4376b7) to Async(default) with arguments: #<GlobalID:0x0000000112c1fda0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = ? LIMIT ?[0m  [["name", "General"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "General"], ["is_private", 0], ["created_at", "2022-12-20 13:06:02.916321"], ["updated_at", "2022-12-20 13:06:02.916321"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mJoinable Create (0.3ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["room_id", 1], ["created_at", "2022-12-20 13:06:02.924888"], ["updated_at", "2022-12-20 13:06:02.924888"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = ? LIMIT ?[0m  [["name", "Testing"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Testing"], ["is_private", 0], ["created_at", "2022-12-20 13:06:02.929250"], ["updated_at", "2022-12-20 13:06:02.929250"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mJoinable Create (0.5ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["room_id", 2], ["created_at", "2022-12-20 13:06:02.933034"], ["updated_at", "2022-12-20 13:06:02.933034"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."name" = ? LIMIT ?[0m  [["name", "Bear Room"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "is_private", "created_at", "updated_at", "last_message_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Bear Room"], ["is_private", 0], ["created_at", "2022-12-20 13:06:02.939698"], ["updated_at", "2022-12-20 13:06:02.939698"], ["last_message_at", nil]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mJoinable Create (0.4ms)[0m  [1m[32mINSERT INTO "joinables" ("user_id", "room_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["room_id", 3], ["created_at", "2022-12-20 13:06:02.943071"], ["updated_at", "2022-12-20 13:06:02.943071"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "HIPPO"], ["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "v9usea5dqb02ppjo5oy9p1er67sx"], ["filename", "fall_leaves.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 453598], ["checksum", "4w/wb+nZnP5Sx2uZuEg0CA=="], ["created_at", "2022-12-20 13:06:02.957139"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 1], ["blob_id", 3], ["created_at", "2022-12-20 13:06:02.958527"]]
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:06:02.959388"], ["id", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
[36m  Disk Storage (1.7ms) [0m[32mUploaded file to key: v9usea5dqb02ppjo5oy9p1er67sx (checksum: 4w/wb+nZnP5Sx2uZuEg0CA==)[0m
  Rendered users/_status.html.erb (Duration: 0.1ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_1\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_1\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 5b1ec3a3-8a2b-4c30-a1ca-9a3a1161a76a) to Async(default) with arguments: #<GlobalID:0x0000000113403ad0 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/1>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 27b627cb-6a38-452b-a21a-e6d9ed6ade08) to Async(default) with arguments: #<GlobalID:0x0000000113401730 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/3>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["username", "KOALA"], ["id", 2], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 2]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "33xfvwmz3gxqxvkzhtggi5u7ze5h"], ["filename", "crystal.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 952225], ["checksum", "cyO7UHpW/z9ezbMliIiDqQ=="], ["created_at", "2022-12-20 13:06:02.978955"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "avatar"], ["record_type", "User"], ["record_id", 2], ["blob_id", 4], ["created_at", "2022-12-20 13:06:02.980289"]]
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2022-12-20 13:06:02.981216"], ["id", 2]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
[36m  Disk Storage (3.9ms) [0m[32mUploaded file to key: 33xfvwmz3gxqxvkzhtggi5u7ze5h (checksum: cyO7UHpW/z9ezbMliIiDqQ==)[0m
  Rendered users/_status.html.erb (Duration: 0.2ms | Allocations: 84)
[ActionCable] Broadcasting to user_status: "<turbo-stream action=\"replace\" target=\"user_2\"><template><turbo-frame id=\"user_status\"></turbo-frame>\n<div class=\"status-circle bg-dark\" id=\"user_2\"></div></template></turbo-stream>"
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: ce31e7e1-439d-4ed3-85cd-a3d7d171e2a6) to Async(default) with arguments: #<GlobalID:0x00000001134f2310 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/2>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c701b883-e1d2-4be8-864a-b2efacb3d7aa) to Async(default) with arguments: #<GlobalID:0x00000001134f0240 @uri=#<URI::GID gid://turbochatter/ActiveStorage::Blob/4>>
  [1m[36mUser Update All (5.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1[0m  [["status", 0]]
  â†³ config/initializers/user_status.rb:6:in `block in <class:UserStatus>'
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (53.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbo_dev"[0m
  [1m[35m (44.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbo_test"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbo_dev"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "turbo_test"[0m
  [1m[35m (187.4ms)[0m  [1m[35mCREATE DATABASE "turbo_dev" ENCODING = 'unicode'[0m
  [1m[35m (104.5ms)[0m  [1m[35mCREATE DATABASE "turbo_test" ENCODING = 'unicode'[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(8509981977642908595)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20221129184433)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221129184433"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRooms (20221129184940)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying, "is_private" boolean DEFAULT FALSE, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221129184940"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateMessages (20221130062651)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "body" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_a8db0fb63a"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_messages_on_room_id" ON "messages" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130062651"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipants (20221130072543)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "participants" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b9a3c50f15"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_08123987c8"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_participants_on_user_id" ON "participants" ("user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_participants_on_room_id" ON "participants" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130072543"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20221130080807)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130080807"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddStatusToUsers (20221130142248)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "status" integer DEFAULT 0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221130142248"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateJoinables (20221203121625)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "joinables" ("id" bigserial primary key, "user_id" bigint NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_6e417600dd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_e8c38b2805"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_user_id" ON "joinables" ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_joinables_on_room_id" ON "joinables" ("room_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121625"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUser (20221203121727)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121727"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCurrentRoomToUser (20221203121816)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "current_room" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221203121816"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLastMessageAtToRooms (20221204125908)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "rooms" ADD "last_message_at" timestamp(6)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221204125908"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (20221208105345)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "recipient_type" character varying NOT NULL, "recipient_id" bigint NOT NULL, "type" character varying NOT NULL, "params" json, "read_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_recipient" ON "notifications" ("recipient_type", "recipient_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_notifications_on_read_at" ON "notifications" ("read_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221208105345"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUsernameToUsers (20221210084944)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "username" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20221210084944"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-12-20 13:18:13.793816"], ["updated_at", "2022-12-20 13:18:13.793816"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(8509981977642908595)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
